2024-10-21 09:49:44,836 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 09:56:47,509 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 10:17:28,923 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 10:17:28,924 - INFO - РўР°Р±Р»РёС†С‹ СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 10:17:28,930 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 10:17:28,933 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 10:18:02,345 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 10:18:02,347 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 10:18:02,352 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 10:18:02,355 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 10:18:33,855 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 10:18:33,856 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 10:18:33,861 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 10:18:33,865 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 10:24:18,837 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 10:24:18,838 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 10:24:18,844 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 10:24:18,847 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 10:25:43,202 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 10:25:43,203 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 10:25:43,208 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 10:25:43,212 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 10:25:46,784 - INFO - select pg_catalog.version()
2024-10-21 10:25:46,785 - INFO - [raw sql] ()
2024-10-21 10:25:46,788 - INFO - select current_schema()
2024-10-21 10:25:46,788 - INFO - [raw sql] ()
2024-10-21 10:25:46,789 - INFO - show standard_conforming_strings
2024-10-21 10:25:46,789 - INFO - [raw sql] ()
2024-10-21 10:25:46,790 - INFO - BEGIN (implicit)
2024-10-21 10:25:46,796 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 10:25:46,796 - INFO - [generated in 0.00032s] ('P001',)
2024-10-21 10:25:46,804 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 10:25:46,804 - INFO - [generated in 0.00035s] (99, 'P001')
2024-10-21 10:25:46,806 - INFO - COMMIT
2024-10-21 10:58:42,806 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 10:59:00,748 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 10:59:00,750 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 10:59:00,755 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 10:59:00,759 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:12:44,734 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 11:12:44,735 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 11:12:44,743 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:12:44,747 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:13:02,909 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 11:13:02,910 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 11:13:02,916 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:13:02,921 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:14:12,422 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 11:14:12,423 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 11:14:12,429 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:14:12,433 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:14:58,163 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 11:14:58,164 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 11:14:58,170 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:14:58,174 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:15:21,330 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 11:15:21,331 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 11:15:21,336 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:15:21,340 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:15:44,023 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 11:15:44,024 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 11:15:44,030 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:15:44,034 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:15:57,641 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 11:15:57,642 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 11:15:57,647 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:15:57,651 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:16:10,622 - INFO - select pg_catalog.version()
2024-10-21 11:16:10,623 - INFO - [raw sql] ()
2024-10-21 11:16:10,626 - INFO - select current_schema()
2024-10-21 11:16:10,627 - INFO - [raw sql] ()
2024-10-21 11:16:10,628 - INFO - show standard_conforming_strings
2024-10-21 11:16:10,629 - INFO - [raw sql] ()
2024-10-21 11:16:10,630 - INFO - BEGIN (implicit)
2024-10-21 11:16:10,637 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 11:16:10,637 - INFO - [generated in 0.00073s] ('P001',)
2024-10-21 11:16:11,384 - INFO - ROLLBACK
2024-10-21 11:26:37,633 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 11:26:37,634 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-21 11:26:37,640 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:26:37,643 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-21 11:26:49,020 - INFO - select pg_catalog.version()
2024-10-21 11:26:49,020 - INFO - [raw sql] ()
2024-10-21 11:26:49,024 - INFO - select current_schema()
2024-10-21 11:26:49,024 - INFO - [raw sql] ()
2024-10-21 11:26:49,025 - INFO - show standard_conforming_strings
2024-10-21 11:26:49,026 - INFO - [raw sql] ()
2024-10-21 11:26:49,027 - INFO - BEGIN (implicit)
2024-10-21 11:26:49,035 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 11:26:49,035 - INFO - [generated in 0.00065s] ('P001',)
2024-10-21 11:26:49,038 - INFO - ROLLBACK
2024-10-21 12:52:53,776 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 12:55:19,677 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 12:55:33,027 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 12:58:16,883 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 12:58:43,815 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 12:59:38,077 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 13:00:11,287 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 13:01:43,884 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 13:03:48,090 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 13:04:06,558 - INFO - Р‘Р°Р·Р° РґР°РЅРЅС‹С… 'reservation_service' СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚.
2024-10-21 18:49:23,921 - INFO - select pg_catalog.version()
2024-10-21 18:49:23,921 - INFO - [raw sql] ()
2024-10-21 18:49:23,928 - INFO - select current_schema()
2024-10-21 18:49:23,928 - INFO - [raw sql] ()
2024-10-21 18:49:23,931 - INFO - show standard_conforming_strings
2024-10-21 18:49:23,931 - INFO - [raw sql] ()
2024-10-21 18:49:23,933 - INFO - BEGIN (implicit)
2024-10-21 18:49:23,934 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 18:49:23,934 - INFO - [generated in 0.00026s] ()
2024-10-21 18:49:28,095 - INFO - COMMIT
2024-10-21 18:50:02,442 - INFO - select pg_catalog.version()
2024-10-21 18:50:02,443 - INFO - [raw sql] ()
2024-10-21 18:50:02,447 - INFO - select current_schema()
2024-10-21 18:50:02,447 - INFO - [raw sql] ()
2024-10-21 18:50:02,449 - INFO - show standard_conforming_strings
2024-10-21 18:50:02,449 - INFO - [raw sql] ()
2024-10-21 18:50:02,450 - INFO - BEGIN (implicit)
2024-10-21 18:50:02,450 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 18:50:02,450 - INFO - [generated in 0.00014s] ()
2024-10-21 18:50:02,451 - INFO - COMMIT
2024-10-21 18:52:34,784 - INFO - select pg_catalog.version()
2024-10-21 18:52:34,785 - INFO - [raw sql] ()
2024-10-21 18:52:34,792 - INFO - select current_schema()
2024-10-21 18:52:34,792 - INFO - [raw sql] ()
2024-10-21 18:52:34,795 - INFO - show standard_conforming_strings
2024-10-21 18:52:34,795 - INFO - [raw sql] ()
2024-10-21 18:52:34,797 - INFO - BEGIN (implicit)
2024-10-21 18:52:34,798 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 18:52:34,798 - INFO - [generated in 0.00021s] ()
2024-10-21 18:52:34,800 - INFO - COMMIT
2024-10-21 18:53:22,824 - INFO - select pg_catalog.version()
2024-10-21 18:53:22,825 - INFO - [raw sql] ()
2024-10-21 18:53:22,831 - INFO - select current_schema()
2024-10-21 18:53:22,831 - INFO - [raw sql] ()
2024-10-21 18:53:22,834 - INFO - show standard_conforming_strings
2024-10-21 18:53:22,834 - INFO - [raw sql] ()
2024-10-21 18:53:22,836 - INFO - BEGIN (implicit)
2024-10-21 18:53:22,837 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 18:53:22,837 - INFO - [generated in 0.00026s] ()
2024-10-21 18:53:22,839 - INFO - COMMIT
2024-10-21 18:54:03,067 - INFO - select pg_catalog.version()
2024-10-21 18:54:03,068 - INFO - [raw sql] ()
2024-10-21 18:54:03,074 - INFO - select current_schema()
2024-10-21 18:54:03,074 - INFO - [raw sql] ()
2024-10-21 18:54:03,076 - INFO - show standard_conforming_strings
2024-10-21 18:54:03,077 - INFO - [raw sql] ()
2024-10-21 18:54:03,078 - INFO - BEGIN (implicit)
2024-10-21 18:54:03,079 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 18:54:03,079 - INFO - [generated in 0.00020s] ()
2024-10-21 18:54:03,081 - INFO - COMMIT
2024-10-21 18:55:38,729 - INFO - select pg_catalog.version()
2024-10-21 18:55:38,729 - INFO - [raw sql] ()
2024-10-21 18:55:38,736 - INFO - select current_schema()
2024-10-21 18:55:38,736 - INFO - [raw sql] ()
2024-10-21 18:55:38,739 - INFO - show standard_conforming_strings
2024-10-21 18:55:38,739 - INFO - [raw sql] ()
2024-10-21 18:55:38,741 - INFO - BEGIN (implicit)
2024-10-21 18:55:38,742 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 18:55:38,742 - INFO - [generated in 0.00021s] ()
2024-10-21 18:55:38,744 - INFO - COMMIT
2024-10-21 18:57:27,405 - INFO - select pg_catalog.version()
2024-10-21 18:57:27,406 - INFO - [raw sql] ()
2024-10-21 18:57:27,413 - INFO - select current_schema()
2024-10-21 18:57:27,413 - INFO - [raw sql] ()
2024-10-21 18:57:27,415 - INFO - show standard_conforming_strings
2024-10-21 18:57:27,416 - INFO - [raw sql] ()
2024-10-21 18:57:27,418 - INFO - BEGIN (implicit)
2024-10-21 18:57:27,419 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 18:57:27,419 - INFO - [generated in 0.00041s] ()
2024-10-21 18:57:27,422 - INFO - COMMIT
2024-10-21 18:58:13,078 - INFO - select pg_catalog.version()
2024-10-21 18:58:13,078 - INFO - [raw sql] ()
2024-10-21 18:58:13,084 - INFO - select current_schema()
2024-10-21 18:58:13,085 - INFO - [raw sql] ()
2024-10-21 18:58:13,087 - INFO - show standard_conforming_strings
2024-10-21 18:58:13,087 - INFO - [raw sql] ()
2024-10-21 18:58:13,088 - INFO - BEGIN (implicit)
2024-10-21 18:58:13,089 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 18:58:13,089 - INFO - [generated in 0.00032s] ()
2024-10-21 18:58:13,092 - INFO - COMMIT
2024-10-21 18:59:44,064 - INFO - select pg_catalog.version()
2024-10-21 18:59:44,065 - INFO - [raw sql] ()
2024-10-21 18:59:44,072 - INFO - select current_schema()
2024-10-21 18:59:44,072 - INFO - [raw sql] ()
2024-10-21 18:59:44,074 - INFO - show standard_conforming_strings
2024-10-21 18:59:44,076 - INFO - [raw sql] ()
2024-10-21 18:59:44,078 - INFO - BEGIN (implicit)
2024-10-21 18:59:44,078 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 18:59:44,079 - INFO - [generated in 0.00023s] ()
2024-10-21 18:59:44,081 - INFO - COMMIT
2024-10-21 19:03:05,056 - INFO - select pg_catalog.version()
2024-10-21 19:03:05,057 - INFO - [raw sql] ()
2024-10-21 19:03:05,070 - INFO - select current_schema()
2024-10-21 19:03:05,071 - INFO - [raw sql] ()
2024-10-21 19:03:05,076 - INFO - show standard_conforming_strings
2024-10-21 19:03:05,076 - INFO - [raw sql] ()
2024-10-21 19:03:05,080 - INFO - BEGIN (implicit)
2024-10-21 19:03:05,081 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 19:03:05,081 - INFO - [generated in 0.00057s] ()
2024-10-21 19:03:05,086 - INFO - COMMIT
2024-10-21 19:03:32,635 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 19:03:32,639 - INFO - Ошибка при добавлении продукта c id 'P001': greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2024-10-21 20:23:46,155 - INFO - select pg_catalog.version()
2024-10-21 20:23:46,163 - INFO - [raw sql] ()
2024-10-21 20:23:46,171 - INFO - select current_schema()
2024-10-21 20:23:46,171 - INFO - [raw sql] ()
2024-10-21 20:23:46,178 - INFO - show standard_conforming_strings
2024-10-21 20:23:46,178 - INFO - [raw sql] ()
2024-10-21 20:23:46,178 - INFO - BEGIN (implicit)
2024-10-21 20:23:46,178 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:23:46,178 - INFO - [generated in 0.00033s] ()
2024-10-21 20:23:46,189 - INFO - COMMIT
2024-10-21 20:24:03,553 - INFO - select pg_catalog.version()
2024-10-21 20:24:03,553 - INFO - [raw sql] ()
2024-10-21 20:24:03,560 - INFO - select current_schema()
2024-10-21 20:24:03,560 - INFO - [raw sql] ()
2024-10-21 20:24:03,562 - INFO - show standard_conforming_strings
2024-10-21 20:24:03,562 - INFO - [raw sql] ()
2024-10-21 20:24:03,562 - INFO - BEGIN (implicit)
2024-10-21 20:24:03,562 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:24:03,562 - INFO - [generated in 0.00014s] ()
2024-10-21 20:24:03,562 - INFO - COMMIT
2024-10-21 20:24:03,568 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:24:03,568 - INFO - Ошибка при добавлении продукта c id 'P001': greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2024-10-21 20:25:17,837 - INFO - select pg_catalog.version()
2024-10-21 20:25:17,837 - INFO - [raw sql] ()
2024-10-21 20:25:17,837 - INFO - select current_schema()
2024-10-21 20:25:17,837 - INFO - [raw sql] ()
2024-10-21 20:25:17,845 - INFO - show standard_conforming_strings
2024-10-21 20:25:17,845 - INFO - [raw sql] ()
2024-10-21 20:25:17,845 - INFO - BEGIN (implicit)
2024-10-21 20:25:17,845 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:25:17,849 - INFO - [generated in 0.00016s] ()
2024-10-21 20:25:17,850 - INFO - COMMIT
2024-10-21 20:25:17,855 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:26:03,138 - INFO - select pg_catalog.version()
2024-10-21 20:26:03,138 - INFO - [raw sql] ()
2024-10-21 20:26:03,138 - INFO - select current_schema()
2024-10-21 20:26:03,138 - INFO - [raw sql] ()
2024-10-21 20:26:03,146 - INFO - show standard_conforming_strings
2024-10-21 20:26:03,146 - INFO - [raw sql] ()
2024-10-21 20:26:03,147 - INFO - BEGIN (implicit)
2024-10-21 20:26:03,148 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:26:03,148 - INFO - [generated in 0.00016s] ()
2024-10-21 20:26:03,150 - INFO - COMMIT
2024-10-21 20:26:03,150 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:26:03,150 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:26:03,150 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:27:28,608 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-4' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 20:27:37,649 - INFO - select pg_catalog.version()
2024-10-21 20:27:37,649 - INFO - [raw sql] ()
2024-10-21 20:27:37,649 - INFO - select current_schema()
2024-10-21 20:27:37,649 - INFO - [raw sql] ()
2024-10-21 20:27:37,657 - INFO - show standard_conforming_strings
2024-10-21 20:27:37,658 - INFO - [raw sql] ()
2024-10-21 20:27:37,658 - INFO - BEGIN (implicit)
2024-10-21 20:27:37,659 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:27:37,659 - INFO - [generated in 0.00017s] ()
2024-10-21 20:27:37,659 - INFO - COMMIT
2024-10-21 20:28:07,615 - INFO - select pg_catalog.version()
2024-10-21 20:28:07,615 - INFO - [raw sql] ()
2024-10-21 20:28:07,624 - INFO - select current_schema()
2024-10-21 20:28:07,624 - INFO - [raw sql] ()
2024-10-21 20:28:07,625 - INFO - show standard_conforming_strings
2024-10-21 20:28:07,627 - INFO - [raw sql] ()
2024-10-21 20:28:07,627 - INFO - BEGIN (implicit)
2024-10-21 20:28:07,627 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:28:07,627 - INFO - [generated in 0.00017s] ()
2024-10-21 20:28:07,627 - INFO - COMMIT
2024-10-21 20:28:41,008 - INFO - select pg_catalog.version()
2024-10-21 20:28:41,008 - INFO - [raw sql] ()
2024-10-21 20:28:41,008 - INFO - select current_schema()
2024-10-21 20:28:41,008 - INFO - [raw sql] ()
2024-10-21 20:28:41,016 - INFO - show standard_conforming_strings
2024-10-21 20:28:41,016 - INFO - [raw sql] ()
2024-10-21 20:28:41,018 - INFO - BEGIN (implicit)
2024-10-21 20:28:41,018 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:28:41,018 - INFO - [generated in 0.00016s] ()
2024-10-21 20:28:41,018 - INFO - COMMIT
2024-10-21 20:29:58,558 - INFO - select pg_catalog.version()
2024-10-21 20:29:58,558 - INFO - [raw sql] ()
2024-10-21 20:29:58,563 - INFO - select current_schema()
2024-10-21 20:29:58,563 - INFO - [raw sql] ()
2024-10-21 20:29:58,565 - INFO - show standard_conforming_strings
2024-10-21 20:29:58,565 - INFO - [raw sql] ()
2024-10-21 20:29:58,566 - INFO - BEGIN (implicit)
2024-10-21 20:29:58,567 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:29:58,567 - INFO - [generated in 0.00017s] ()
2024-10-21 20:29:58,569 - INFO - COMMIT
2024-10-21 20:30:24,623 - INFO - select pg_catalog.version()
2024-10-21 20:30:24,624 - INFO - [raw sql] ()
2024-10-21 20:30:24,628 - INFO - select current_schema()
2024-10-21 20:30:24,629 - INFO - [raw sql] ()
2024-10-21 20:30:24,630 - INFO - show standard_conforming_strings
2024-10-21 20:30:24,630 - INFO - [raw sql] ()
2024-10-21 20:30:24,632 - INFO - BEGIN (implicit)
2024-10-21 20:30:24,632 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:30:24,632 - INFO - [generated in 0.00015s] ()
2024-10-21 20:30:24,634 - INFO - COMMIT
2024-10-21 20:30:24,813 - INFO - select pg_catalog.version()
2024-10-21 20:30:24,813 - INFO - [raw sql] ()
2024-10-21 20:30:24,815 - INFO - select current_schema()
2024-10-21 20:30:24,815 - INFO - [raw sql] ()
2024-10-21 20:30:24,817 - INFO - show standard_conforming_strings
2024-10-21 20:30:24,817 - INFO - [raw sql] ()
2024-10-21 20:30:24,819 - INFO - BEGIN (implicit)
2024-10-21 20:30:24,819 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:30:24,819 - INFO - [generated in 0.00013s] ()
2024-10-21 20:31:28,145 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:31:28,146 - INFO - [generated in 0.00084s] ()
2024-10-21 20:31:28,152 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:31:28,153 - INFO - COMMIT
2024-10-21 20:31:28,156 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:31:28,156 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:32:50,866 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-4' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 20:33:23,668 - INFO - select pg_catalog.version()
2024-10-21 20:33:23,668 - INFO - [raw sql] ()
2024-10-21 20:33:23,668 - INFO - select current_schema()
2024-10-21 20:33:23,668 - INFO - [raw sql] ()
2024-10-21 20:33:23,676 - INFO - show standard_conforming_strings
2024-10-21 20:33:23,676 - INFO - [raw sql] ()
2024-10-21 20:33:23,676 - INFO - BEGIN (implicit)
2024-10-21 20:33:23,676 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:33:23,676 - INFO - [generated in 0.00014s] ()
2024-10-21 20:33:23,676 - INFO - COMMIT
2024-10-21 20:33:23,753 - INFO - select pg_catalog.version()
2024-10-21 20:33:23,753 - INFO - [raw sql] ()
2024-10-21 20:33:23,753 - INFO - select current_schema()
2024-10-21 20:33:23,753 - INFO - [raw sql] ()
2024-10-21 20:33:23,753 - INFO - show standard_conforming_strings
2024-10-21 20:33:23,753 - INFO - [raw sql] ()
2024-10-21 20:33:23,753 - INFO - BEGIN (implicit)
2024-10-21 20:33:23,753 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:33:23,753 - INFO - [generated in 0.00018s] ()
2024-10-21 20:34:37,094 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:34:37,095 - INFO - [generated in 0.00053s] ()
2024-10-21 20:34:37,096 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:34:37,096 - INFO - COMMIT
2024-10-21 20:34:37,160 - INFO - select pg_catalog.version()
2024-10-21 20:34:37,161 - INFO - [raw sql] ()
2024-10-21 20:34:37,162 - INFO - select current_schema()
2024-10-21 20:34:37,163 - INFO - [raw sql] ()
2024-10-21 20:34:37,164 - INFO - show standard_conforming_strings
2024-10-21 20:34:37,164 - INFO - [raw sql] ()
2024-10-21 20:34:37,166 - INFO - BEGIN (implicit)
2024-10-21 20:34:37,166 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:34:37,166 - INFO - [generated in 0.00016s] ('P001', 'Продукт 1', 100)
2024-10-21 20:34:37,190 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:34:37,190 - INFO - COMMIT
2024-10-21 20:34:37,200 - INFO - BEGIN (implicit)
2024-10-21 20:34:37,201 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:34:37,201 - INFO - [cached since 0.03505s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:34:37,202 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:34:37,202 - INFO - COMMIT
2024-10-21 20:36:45,505 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 20:36:55,264 - INFO - select pg_catalog.version()
2024-10-21 20:36:55,264 - INFO - [raw sql] ()
2024-10-21 20:36:55,272 - INFO - select current_schema()
2024-10-21 20:36:55,272 - INFO - [raw sql] ()
2024-10-21 20:36:55,272 - INFO - show standard_conforming_strings
2024-10-21 20:36:55,272 - INFO - [raw sql] ()
2024-10-21 20:36:55,272 - INFO - BEGIN (implicit)
2024-10-21 20:36:55,272 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:36:55,272 - INFO - [generated in 0.00014s] ()
2024-10-21 20:36:55,280 - INFO - COMMIT
2024-10-21 20:36:55,348 - INFO - select pg_catalog.version()
2024-10-21 20:36:55,348 - INFO - [raw sql] ()
2024-10-21 20:36:55,353 - INFO - select current_schema()
2024-10-21 20:36:55,353 - INFO - [raw sql] ()
2024-10-21 20:36:55,356 - INFO - show standard_conforming_strings
2024-10-21 20:36:55,356 - INFO - [raw sql] ()
2024-10-21 20:36:55,356 - INFO - BEGIN (implicit)
2024-10-21 20:36:55,356 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:36:55,356 - INFO - [generated in 0.00012s] ()
2024-10-21 20:36:55,360 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:36:55,360 - INFO - [generated in 0.00017s] ()
2024-10-21 20:36:55,360 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:36:55,360 - INFO - COMMIT
2024-10-21 20:36:55,542 - INFO - select pg_catalog.version()
2024-10-21 20:36:55,542 - INFO - [raw sql] ()
2024-10-21 20:36:55,548 - INFO - select current_schema()
2024-10-21 20:36:55,548 - INFO - [raw sql] ()
2024-10-21 20:36:55,549 - INFO - show standard_conforming_strings
2024-10-21 20:36:55,549 - INFO - [raw sql] ()
2024-10-21 20:36:55,549 - INFO - BEGIN (implicit)
2024-10-21 20:36:55,549 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:36:55,549 - INFO - [generated in 0.00017s] ('P001', 'Продукт 1', 100)
2024-10-21 20:36:55,549 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:36:55,549 - INFO - COMMIT
2024-10-21 20:36:55,566 - INFO - BEGIN (implicit)
2024-10-21 20:36:55,566 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:36:55,566 - INFO - [cached since 0.01628s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:36:55,566 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:36:55,566 - INFO - COMMIT
2024-10-21 20:37:21,659 - INFO - select pg_catalog.version()
2024-10-21 20:37:21,659 - INFO - [raw sql] ()
2024-10-21 20:37:21,667 - INFO - select current_schema()
2024-10-21 20:37:21,667 - INFO - [raw sql] ()
2024-10-21 20:37:21,667 - INFO - show standard_conforming_strings
2024-10-21 20:37:21,667 - INFO - [raw sql] ()
2024-10-21 20:37:21,667 - INFO - BEGIN (implicit)
2024-10-21 20:37:21,667 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:37:21,675 - INFO - [generated in 0.00032s] ()
2024-10-21 20:37:21,678 - INFO - COMMIT
2024-10-21 20:37:21,863 - INFO - select pg_catalog.version()
2024-10-21 20:37:21,863 - INFO - [raw sql] ()
2024-10-21 20:37:21,873 - INFO - select current_schema()
2024-10-21 20:37:21,873 - INFO - [raw sql] ()
2024-10-21 20:37:21,873 - INFO - show standard_conforming_strings
2024-10-21 20:37:21,873 - INFO - [raw sql] ()
2024-10-21 20:37:21,873 - INFO - BEGIN (implicit)
2024-10-21 20:37:21,873 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:37:21,873 - INFO - [generated in 0.00012s] ()
2024-10-21 20:37:21,880 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:37:21,880 - INFO - [generated in 0.00022s] ()
2024-10-21 20:37:21,881 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:37:21,881 - INFO - COMMIT
2024-10-21 20:37:21,953 - INFO - select pg_catalog.version()
2024-10-21 20:37:21,953 - INFO - [raw sql] ()
2024-10-21 20:37:21,956 - INFO - select current_schema()
2024-10-21 20:37:21,956 - INFO - [raw sql] ()
2024-10-21 20:37:21,956 - INFO - show standard_conforming_strings
2024-10-21 20:37:21,956 - INFO - [raw sql] ()
2024-10-21 20:37:21,956 - INFO - BEGIN (implicit)
2024-10-21 20:37:21,956 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:37:21,956 - INFO - [generated in 0.00017s] ('P001', 'Продукт 1', 100)
2024-10-21 20:37:21,962 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:37:21,962 - INFO - COMMIT
2024-10-21 20:37:21,970 - INFO - BEGIN (implicit)
2024-10-21 20:37:21,970 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:37:21,970 - INFO - [cached since 0.009538s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:37:21,970 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:37:21,970 - INFO - COMMIT
2024-10-21 20:38:29,567 - INFO - select pg_catalog.version()
2024-10-21 20:38:29,567 - INFO - [raw sql] ()
2024-10-21 20:38:29,576 - INFO - select current_schema()
2024-10-21 20:38:29,576 - INFO - [raw sql] ()
2024-10-21 20:38:29,576 - INFO - show standard_conforming_strings
2024-10-21 20:38:29,576 - INFO - [raw sql] ()
2024-10-21 20:38:29,576 - INFO - BEGIN (implicit)
2024-10-21 20:38:29,583 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:38:29,583 - INFO - [generated in 0.00016s] ()
2024-10-21 20:38:29,585 - INFO - COMMIT
2024-10-21 20:38:29,651 - INFO - select pg_catalog.version()
2024-10-21 20:38:29,651 - INFO - [raw sql] ()
2024-10-21 20:38:29,651 - INFO - select current_schema()
2024-10-21 20:38:29,651 - INFO - [raw sql] ()
2024-10-21 20:38:29,657 - INFO - show standard_conforming_strings
2024-10-21 20:38:29,657 - INFO - [raw sql] ()
2024-10-21 20:38:29,657 - INFO - BEGIN (implicit)
2024-10-21 20:38:29,657 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:38:29,657 - INFO - [generated in 0.00011s] ()
2024-10-21 20:38:29,657 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:38:29,657 - INFO - [generated in 0.00012s] ()
2024-10-21 20:38:29,657 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:38:29,657 - INFO - COMMIT
2024-10-21 20:38:29,723 - INFO - select pg_catalog.version()
2024-10-21 20:38:29,723 - INFO - [raw sql] ()
2024-10-21 20:38:29,723 - INFO - select current_schema()
2024-10-21 20:38:29,723 - INFO - [raw sql] ()
2024-10-21 20:38:29,731 - INFO - show standard_conforming_strings
2024-10-21 20:38:29,731 - INFO - [raw sql] ()
2024-10-21 20:38:29,731 - INFO - BEGIN (implicit)
2024-10-21 20:38:29,731 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:38:29,731 - INFO - [generated in 0.00018s] ('P001', 'Продукт 1', 100)
2024-10-21 20:38:29,731 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:38:29,731 - INFO - COMMIT
2024-10-21 20:38:29,745 - INFO - BEGIN (implicit)
2024-10-21 20:38:29,745 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:38:29,745 - INFO - [cached since 0.01403s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:38:29,745 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:38:29,745 - INFO - COMMIT
2024-10-21 20:41:30,192 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 20:41:39,409 - INFO - select pg_catalog.version()
2024-10-21 20:41:39,409 - INFO - [raw sql] ()
2024-10-21 20:41:39,409 - INFO - select current_schema()
2024-10-21 20:41:39,409 - INFO - [raw sql] ()
2024-10-21 20:41:39,416 - INFO - show standard_conforming_strings
2024-10-21 20:41:39,416 - INFO - [raw sql] ()
2024-10-21 20:41:39,417 - INFO - BEGIN (implicit)
2024-10-21 20:41:39,417 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:41:39,417 - INFO - [generated in 0.00015s] ()
2024-10-21 20:41:39,417 - INFO - COMMIT
2024-10-21 20:41:39,482 - INFO - select pg_catalog.version()
2024-10-21 20:41:39,482 - INFO - [raw sql] ()
2024-10-21 20:41:39,482 - INFO - select current_schema()
2024-10-21 20:41:39,482 - INFO - [raw sql] ()
2024-10-21 20:41:39,489 - INFO - show standard_conforming_strings
2024-10-21 20:41:39,489 - INFO - [raw sql] ()
2024-10-21 20:41:39,489 - INFO - BEGIN (implicit)
2024-10-21 20:41:39,489 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:41:39,489 - INFO - [generated in 0.00012s] ()
2024-10-21 20:41:39,489 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:41:39,489 - INFO - [generated in 0.00021s] ()
2024-10-21 20:41:39,489 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:41:39,489 - INFO - COMMIT
2024-10-21 20:41:39,571 - INFO - select pg_catalog.version()
2024-10-21 20:41:39,571 - INFO - [raw sql] ()
2024-10-21 20:41:39,571 - INFO - select current_schema()
2024-10-21 20:41:39,571 - INFO - [raw sql] ()
2024-10-21 20:41:39,571 - INFO - show standard_conforming_strings
2024-10-21 20:41:39,571 - INFO - [raw sql] ()
2024-10-21 20:41:39,571 - INFO - BEGIN (implicit)
2024-10-21 20:41:39,571 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:41:39,571 - INFO - [generated in 0.00017s] ('P001', 'Продукт 1', 100)
2024-10-21 20:41:39,580 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:41:39,580 - INFO - COMMIT
2024-10-21 20:41:39,592 - INFO - BEGIN (implicit)
2024-10-21 20:41:39,592 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:41:39,592 - INFO - [cached since 0.01547s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:41:39,592 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:41:39,592 - INFO - COMMIT
2024-10-21 20:42:57,079 - INFO - select pg_catalog.version()
2024-10-21 20:42:57,079 - INFO - [raw sql] ()
2024-10-21 20:42:57,079 - INFO - select current_schema()
2024-10-21 20:42:57,079 - INFO - [raw sql] ()
2024-10-21 20:42:57,087 - INFO - show standard_conforming_strings
2024-10-21 20:42:57,087 - INFO - [raw sql] ()
2024-10-21 20:42:57,087 - INFO - BEGIN (implicit)
2024-10-21 20:42:57,087 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:42:57,087 - INFO - [generated in 0.00017s] ()
2024-10-21 20:42:57,087 - INFO - COMMIT
2024-10-21 20:42:57,158 - INFO - select pg_catalog.version()
2024-10-21 20:42:57,158 - INFO - [raw sql] ()
2024-10-21 20:42:57,158 - INFO - select current_schema()
2024-10-21 20:42:57,158 - INFO - [raw sql] ()
2024-10-21 20:42:57,158 - INFO - show standard_conforming_strings
2024-10-21 20:42:57,158 - INFO - [raw sql] ()
2024-10-21 20:42:57,158 - INFO - BEGIN (implicit)
2024-10-21 20:42:57,158 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:42:57,158 - INFO - [generated in 0.00011s] ()
2024-10-21 20:42:57,158 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:42:57,158 - INFO - [generated in 0.00013s] ()
2024-10-21 20:42:57,158 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:42:57,158 - INFO - COMMIT
2024-10-21 20:42:57,225 - INFO - select pg_catalog.version()
2024-10-21 20:42:57,225 - INFO - [raw sql] ()
2024-10-21 20:42:57,233 - INFO - select current_schema()
2024-10-21 20:42:57,233 - INFO - [raw sql] ()
2024-10-21 20:42:57,233 - INFO - show standard_conforming_strings
2024-10-21 20:42:57,233 - INFO - [raw sql] ()
2024-10-21 20:42:57,233 - INFO - BEGIN (implicit)
2024-10-21 20:42:57,233 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:42:57,233 - INFO - [generated in 0.00016s] ('P001', 'Продукт 1', 100)
2024-10-21 20:42:57,233 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:42:57,233 - INFO - COMMIT
2024-10-21 20:42:57,251 - INFO - BEGIN (implicit)
2024-10-21 20:42:57,251 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:42:57,251 - INFO - [cached since 0.01439s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:42:57,251 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:42:57,251 - INFO - COMMIT
2024-10-21 20:43:08,864 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 20:43:18,439 - INFO - select pg_catalog.version()
2024-10-21 20:43:18,439 - INFO - [raw sql] ()
2024-10-21 20:43:18,441 - INFO - select current_schema()
2024-10-21 20:43:18,441 - INFO - [raw sql] ()
2024-10-21 20:43:18,446 - INFO - show standard_conforming_strings
2024-10-21 20:43:18,446 - INFO - [raw sql] ()
2024-10-21 20:43:18,447 - INFO - BEGIN (implicit)
2024-10-21 20:43:18,447 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:43:18,447 - INFO - [generated in 0.00015s] ()
2024-10-21 20:43:18,447 - INFO - COMMIT
2024-10-21 20:43:18,511 - INFO - select pg_catalog.version()
2024-10-21 20:43:18,511 - INFO - [raw sql] ()
2024-10-21 20:43:18,511 - INFO - select current_schema()
2024-10-21 20:43:18,511 - INFO - [raw sql] ()
2024-10-21 20:43:18,518 - INFO - show standard_conforming_strings
2024-10-21 20:43:18,518 - INFO - [raw sql] ()
2024-10-21 20:43:18,519 - INFO - BEGIN (implicit)
2024-10-21 20:43:18,520 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:43:18,520 - INFO - [generated in 0.00021s] ()
2024-10-21 20:43:18,520 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:43:18,520 - INFO - [generated in 0.00016s] ()
2024-10-21 20:43:18,520 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:43:18,520 - INFO - COMMIT
2024-10-21 20:43:18,585 - INFO - select pg_catalog.version()
2024-10-21 20:43:18,585 - INFO - [raw sql] ()
2024-10-21 20:43:18,585 - INFO - select current_schema()
2024-10-21 20:43:18,585 - INFO - [raw sql] ()
2024-10-21 20:43:18,591 - INFO - show standard_conforming_strings
2024-10-21 20:43:18,591 - INFO - [raw sql] ()
2024-10-21 20:43:18,591 - INFO - BEGIN (implicit)
2024-10-21 20:43:18,591 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:43:18,591 - INFO - [generated in 0.00018s] ('P001', 'Продукт 1', 100)
2024-10-21 20:43:18,591 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:43:18,591 - INFO - COMMIT
2024-10-21 20:43:18,599 - INFO - BEGIN (implicit)
2024-10-21 20:43:18,599 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:43:18,599 - INFO - [cached since 0.008665s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:43:18,601 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:43:18,601 - INFO - COMMIT
2024-10-21 20:43:46,399 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 20:43:58,662 - INFO - select pg_catalog.version()
2024-10-21 20:43:58,662 - INFO - [raw sql] ()
2024-10-21 20:43:58,665 - INFO - select current_schema()
2024-10-21 20:43:58,665 - INFO - [raw sql] ()
2024-10-21 20:43:58,671 - INFO - show standard_conforming_strings
2024-10-21 20:43:58,671 - INFO - [raw sql] ()
2024-10-21 20:43:58,673 - INFO - BEGIN (implicit)
2024-10-21 20:43:58,673 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:43:58,673 - INFO - [generated in 0.00016s] ()
2024-10-21 20:43:58,673 - INFO - COMMIT
2024-10-21 20:43:58,736 - INFO - select pg_catalog.version()
2024-10-21 20:43:58,736 - INFO - [raw sql] ()
2024-10-21 20:43:58,744 - INFO - select current_schema()
2024-10-21 20:43:58,744 - INFO - [raw sql] ()
2024-10-21 20:43:58,746 - INFO - show standard_conforming_strings
2024-10-21 20:43:58,746 - INFO - [raw sql] ()
2024-10-21 20:43:58,746 - INFO - BEGIN (implicit)
2024-10-21 20:43:58,746 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:43:58,746 - INFO - [generated in 0.00014s] ()
2024-10-21 20:43:58,746 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:43:58,746 - INFO - [generated in 0.00016s] ()
2024-10-21 20:43:58,746 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:43:58,746 - INFO - COMMIT
2024-10-21 20:43:58,925 - INFO - select pg_catalog.version()
2024-10-21 20:43:58,925 - INFO - [raw sql] ()
2024-10-21 20:43:58,925 - INFO - select current_schema()
2024-10-21 20:43:58,925 - INFO - [raw sql] ()
2024-10-21 20:43:58,933 - INFO - show standard_conforming_strings
2024-10-21 20:43:58,933 - INFO - [raw sql] ()
2024-10-21 20:43:58,933 - INFO - BEGIN (implicit)
2024-10-21 20:43:58,933 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:43:58,933 - INFO - [generated in 0.00021s] ('P001', 'Продукт 1', 100)
2024-10-21 20:43:58,933 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:43:58,933 - INFO - COMMIT
2024-10-21 20:43:58,950 - INFO - BEGIN (implicit)
2024-10-21 20:43:58,950 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:43:58,950 - INFO - [cached since 0.01499s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:43:58,950 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:43:58,950 - INFO - COMMIT
2024-10-21 20:44:00,271 - INFO - select pg_catalog.version()
2024-10-21 20:44:00,271 - INFO - [raw sql] ()
2024-10-21 20:44:00,271 - INFO - select current_schema()
2024-10-21 20:44:00,271 - INFO - [raw sql] ()
2024-10-21 20:44:00,271 - INFO - show standard_conforming_strings
2024-10-21 20:44:00,271 - INFO - [raw sql] ()
2024-10-21 20:44:00,279 - INFO - BEGIN (implicit)
2024-10-21 20:44:00,296 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:44:00,296 - INFO - [generated in 0.00041s] ('P001',)
2024-10-21 20:44:08,136 - INFO - ROLLBACK
2024-10-21 20:44:17,029 - INFO - BEGIN (implicit)
2024-10-21 20:44:17,031 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:44:17,031 - INFO - [cached since 16.73s ago] ('P001',)
2024-10-21 20:44:30,373 - INFO - ROLLBACK
2024-10-21 20:45:43,747 - INFO - select pg_catalog.version()
2024-10-21 20:45:43,747 - INFO - [raw sql] ()
2024-10-21 20:45:43,748 - INFO - select current_schema()
2024-10-21 20:45:43,753 - INFO - [raw sql] ()
2024-10-21 20:45:43,753 - INFO - show standard_conforming_strings
2024-10-21 20:45:43,753 - INFO - [raw sql] ()
2024-10-21 20:45:43,753 - INFO - BEGIN (implicit)
2024-10-21 20:45:43,753 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:45:43,753 - INFO - [generated in 0.00015s] ()
2024-10-21 20:45:43,753 - INFO - COMMIT
2024-10-21 20:45:43,826 - INFO - select pg_catalog.version()
2024-10-21 20:45:43,826 - INFO - [raw sql] ()
2024-10-21 20:45:43,826 - INFO - select current_schema()
2024-10-21 20:45:43,826 - INFO - [raw sql] ()
2024-10-21 20:45:43,834 - INFO - show standard_conforming_strings
2024-10-21 20:45:43,834 - INFO - [raw sql] ()
2024-10-21 20:45:43,834 - INFO - BEGIN (implicit)
2024-10-21 20:45:43,834 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:45:43,834 - INFO - [generated in 0.00013s] ()
2024-10-21 20:45:43,834 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:45:43,834 - INFO - [generated in 0.00027s] ()
2024-10-21 20:45:43,834 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:45:43,834 - INFO - COMMIT
2024-10-21 20:45:43,944 - INFO - select pg_catalog.version()
2024-10-21 20:45:43,944 - INFO - [raw sql] ()
2024-10-21 20:45:43,949 - INFO - select current_schema()
2024-10-21 20:45:43,949 - INFO - [raw sql] ()
2024-10-21 20:45:43,949 - INFO - show standard_conforming_strings
2024-10-21 20:45:43,949 - INFO - [raw sql] ()
2024-10-21 20:45:43,949 - INFO - BEGIN (implicit)
2024-10-21 20:45:43,949 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:45:43,949 - INFO - [generated in 0.00018s] ('P001', 'Продукт 1', 100)
2024-10-21 20:45:43,954 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:45:43,954 - INFO - COMMIT
2024-10-21 20:45:43,968 - INFO - BEGIN (implicit)
2024-10-21 20:45:43,968 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:45:43,970 - INFO - [cached since 0.0166s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:45:43,971 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:45:43,971 - INFO - COMMIT
2024-10-21 20:45:44,562 - INFO - select pg_catalog.version()
2024-10-21 20:45:44,562 - INFO - [raw sql] ()
2024-10-21 20:45:44,562 - INFO - select current_schema()
2024-10-21 20:45:44,562 - INFO - [raw sql] ()
2024-10-21 20:45:44,572 - INFO - show standard_conforming_strings
2024-10-21 20:45:44,572 - INFO - [raw sql] ()
2024-10-21 20:45:44,573 - INFO - BEGIN (implicit)
2024-10-21 20:45:44,579 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:45:44,579 - INFO - [generated in 0.00022s] ('P001',)
2024-10-21 20:47:37,705 - INFO - select pg_catalog.version()
2024-10-21 20:47:37,705 - INFO - [raw sql] ()
2024-10-21 20:47:37,713 - INFO - select current_schema()
2024-10-21 20:47:37,713 - INFO - [raw sql] ()
2024-10-21 20:47:37,713 - INFO - show standard_conforming_strings
2024-10-21 20:47:37,713 - INFO - [raw sql] ()
2024-10-21 20:47:37,713 - INFO - BEGIN (implicit)
2024-10-21 20:47:37,713 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:47:37,713 - INFO - [generated in 0.00021s] ()
2024-10-21 20:47:37,719 - INFO - COMMIT
2024-10-21 20:47:37,793 - INFO - select pg_catalog.version()
2024-10-21 20:47:37,793 - INFO - [raw sql] ()
2024-10-21 20:47:37,793 - INFO - select current_schema()
2024-10-21 20:47:37,793 - INFO - [raw sql] ()
2024-10-21 20:47:37,801 - INFO - show standard_conforming_strings
2024-10-21 20:47:37,801 - INFO - [raw sql] ()
2024-10-21 20:47:37,801 - INFO - BEGIN (implicit)
2024-10-21 20:47:37,801 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:47:37,801 - INFO - [generated in 0.00013s] ()
2024-10-21 20:47:37,801 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:47:37,801 - INFO - [generated in 0.00017s] ()
2024-10-21 20:47:37,801 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:47:37,801 - INFO - COMMIT
2024-10-21 20:47:37,880 - INFO - select pg_catalog.version()
2024-10-21 20:47:37,880 - INFO - [raw sql] ()
2024-10-21 20:47:37,886 - INFO - select current_schema()
2024-10-21 20:47:37,886 - INFO - [raw sql] ()
2024-10-21 20:47:37,886 - INFO - show standard_conforming_strings
2024-10-21 20:47:37,886 - INFO - [raw sql] ()
2024-10-21 20:47:37,886 - INFO - BEGIN (implicit)
2024-10-21 20:47:37,886 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:47:37,886 - INFO - [generated in 0.00017s] ('P001', 'Продукт 1', 100)
2024-10-21 20:47:37,886 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:47:37,886 - INFO - COMMIT
2024-10-21 20:47:37,903 - INFO - BEGIN (implicit)
2024-10-21 20:47:37,903 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:47:37,903 - INFO - [cached since 0.01511s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:47:37,903 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:47:37,903 - INFO - COMMIT
2024-10-21 20:47:38,656 - INFO - select pg_catalog.version()
2024-10-21 20:47:38,656 - INFO - [raw sql] ()
2024-10-21 20:47:38,664 - INFO - select current_schema()
2024-10-21 20:47:38,664 - INFO - [raw sql] ()
2024-10-21 20:47:38,664 - INFO - show standard_conforming_strings
2024-10-21 20:47:38,664 - INFO - [raw sql] ()
2024-10-21 20:47:38,664 - INFO - BEGIN (implicit)
2024-10-21 20:47:38,680 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:47:38,680 - INFO - [generated in 0.00035s] ('P001',)
2024-10-21 20:47:42,350 - INFO - ROLLBACK
2024-10-21 20:48:39,102 - INFO - BEGIN (implicit)
2024-10-21 20:48:39,102 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:48:39,102 - INFO - [cached since 60.42s ago] ('P001',)
2024-10-21 20:48:39,106 - INFO - ROLLBACK
2024-10-21 20:48:54,595 - INFO - select pg_catalog.version()
2024-10-21 20:48:54,595 - INFO - [raw sql] ()
2024-10-21 20:48:54,604 - INFO - select current_schema()
2024-10-21 20:48:54,604 - INFO - [raw sql] ()
2024-10-21 20:48:54,604 - INFO - show standard_conforming_strings
2024-10-21 20:48:54,604 - INFO - [raw sql] ()
2024-10-21 20:48:54,604 - INFO - BEGIN (implicit)
2024-10-21 20:48:54,604 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:48:54,604 - INFO - [generated in 0.00014s] ()
2024-10-21 20:48:54,612 - INFO - COMMIT
2024-10-21 20:48:54,679 - INFO - select pg_catalog.version()
2024-10-21 20:48:54,679 - INFO - [raw sql] ()
2024-10-21 20:48:54,680 - INFO - select current_schema()
2024-10-21 20:48:54,680 - INFO - [raw sql] ()
2024-10-21 20:48:54,680 - INFO - show standard_conforming_strings
2024-10-21 20:48:54,680 - INFO - [raw sql] ()
2024-10-21 20:48:54,680 - INFO - BEGIN (implicit)
2024-10-21 20:48:54,680 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:48:54,680 - INFO - [generated in 0.00017s] ()
2024-10-21 20:48:54,688 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:48:54,688 - INFO - [generated in 0.00023s] ()
2024-10-21 20:48:54,688 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:48:54,688 - INFO - COMMIT
2024-10-21 20:48:54,754 - INFO - select pg_catalog.version()
2024-10-21 20:48:54,754 - INFO - [raw sql] ()
2024-10-21 20:48:54,754 - INFO - select current_schema()
2024-10-21 20:48:54,754 - INFO - [raw sql] ()
2024-10-21 20:48:54,754 - INFO - show standard_conforming_strings
2024-10-21 20:48:54,754 - INFO - [raw sql] ()
2024-10-21 20:48:54,754 - INFO - BEGIN (implicit)
2024-10-21 20:48:54,754 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:48:54,754 - INFO - [generated in 0.00017s] ('P001', 'Продукт 1', 100)
2024-10-21 20:48:54,762 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:48:54,762 - INFO - COMMIT
2024-10-21 20:48:54,773 - INFO - BEGIN (implicit)
2024-10-21 20:48:54,773 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:48:54,773 - INFO - [cached since 0.01449s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:48:54,773 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:48:54,773 - INFO - COMMIT
2024-10-21 20:48:59,520 - INFO - select pg_catalog.version()
2024-10-21 20:48:59,520 - INFO - [raw sql] ()
2024-10-21 20:48:59,520 - INFO - select current_schema()
2024-10-21 20:48:59,520 - INFO - [raw sql] ()
2024-10-21 20:48:59,528 - INFO - show standard_conforming_strings
2024-10-21 20:48:59,528 - INFO - [raw sql] ()
2024-10-21 20:48:59,528 - INFO - BEGIN (implicit)
2024-10-21 20:48:59,545 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:48:59,545 - INFO - [generated in 0.00040s] ('P001',)
2024-10-21 20:49:21,846 - INFO - ROLLBACK
2024-10-21 20:49:57,748 - INFO - select pg_catalog.version()
2024-10-21 20:49:57,748 - INFO - [raw sql] ()
2024-10-21 20:49:57,755 - INFO - select current_schema()
2024-10-21 20:49:57,755 - INFO - [raw sql] ()
2024-10-21 20:49:57,755 - INFO - show standard_conforming_strings
2024-10-21 20:49:57,755 - INFO - [raw sql] ()
2024-10-21 20:49:57,755 - INFO - BEGIN (implicit)
2024-10-21 20:49:57,755 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:49:57,755 - INFO - [generated in 0.00014s] ()
2024-10-21 20:49:57,755 - INFO - COMMIT
2024-10-21 20:49:57,829 - INFO - select pg_catalog.version()
2024-10-21 20:49:57,829 - INFO - [raw sql] ()
2024-10-21 20:49:57,831 - INFO - select current_schema()
2024-10-21 20:49:57,831 - INFO - [raw sql] ()
2024-10-21 20:49:57,831 - INFO - show standard_conforming_strings
2024-10-21 20:49:57,831 - INFO - [raw sql] ()
2024-10-21 20:49:57,831 - INFO - BEGIN (implicit)
2024-10-21 20:49:57,831 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:49:57,831 - INFO - [generated in 0.00016s] ()
2024-10-21 20:49:57,837 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:49:57,837 - INFO - [generated in 0.00016s] ()
2024-10-21 20:49:57,838 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:49:57,838 - INFO - COMMIT
2024-10-21 20:49:57,912 - INFO - select pg_catalog.version()
2024-10-21 20:49:57,912 - INFO - [raw sql] ()
2024-10-21 20:49:57,912 - INFO - select current_schema()
2024-10-21 20:49:57,912 - INFO - [raw sql] ()
2024-10-21 20:49:57,912 - INFO - show standard_conforming_strings
2024-10-21 20:49:57,912 - INFO - [raw sql] ()
2024-10-21 20:49:57,912 - INFO - BEGIN (implicit)
2024-10-21 20:49:57,912 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:49:57,912 - INFO - [generated in 0.00017s] ('P001', 'Продукт 1', 100)
2024-10-21 20:49:57,919 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:49:57,919 - INFO - COMMIT
2024-10-21 20:49:57,931 - INFO - BEGIN (implicit)
2024-10-21 20:49:57,931 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:49:57,932 - INFO - [cached since 0.01504s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:49:57,932 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:49:57,932 - INFO - COMMIT
2024-10-21 20:49:58,831 - INFO - select pg_catalog.version()
2024-10-21 20:49:58,831 - INFO - [raw sql] ()
2024-10-21 20:49:58,839 - INFO - select current_schema()
2024-10-21 20:49:58,839 - INFO - [raw sql] ()
2024-10-21 20:49:58,840 - INFO - show standard_conforming_strings
2024-10-21 20:49:58,840 - INFO - [raw sql] ()
2024-10-21 20:49:58,842 - INFO - BEGIN (implicit)
2024-10-21 20:49:58,849 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:49:58,849 - INFO - [generated in 0.00023s] ('P001',)
2024-10-21 20:50:01,209 - INFO - ROLLBACK
2024-10-21 20:50:26,003 - INFO - select pg_catalog.version()
2024-10-21 20:50:26,009 - INFO - [raw sql] ()
2024-10-21 20:50:26,011 - INFO - select current_schema()
2024-10-21 20:50:26,011 - INFO - [raw sql] ()
2024-10-21 20:50:26,011 - INFO - show standard_conforming_strings
2024-10-21 20:50:26,011 - INFO - [raw sql] ()
2024-10-21 20:50:26,011 - INFO - BEGIN (implicit)
2024-10-21 20:50:26,011 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:50:26,011 - INFO - [generated in 0.00015s] ()
2024-10-21 20:50:26,017 - INFO - COMMIT
2024-10-21 20:50:26,084 - INFO - select pg_catalog.version()
2024-10-21 20:50:26,084 - INFO - [raw sql] ()
2024-10-21 20:50:26,084 - INFO - select current_schema()
2024-10-21 20:50:26,084 - INFO - [raw sql] ()
2024-10-21 20:50:26,084 - INFO - show standard_conforming_strings
2024-10-21 20:50:26,084 - INFO - [raw sql] ()
2024-10-21 20:50:26,084 - INFO - BEGIN (implicit)
2024-10-21 20:50:26,084 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:50:26,084 - INFO - [generated in 0.00016s] ()
2024-10-21 20:50:26,091 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:50:26,091 - INFO - [generated in 0.00014s] ()
2024-10-21 20:50:26,091 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:50:26,091 - INFO - COMMIT
2024-10-21 20:50:26,156 - INFO - select pg_catalog.version()
2024-10-21 20:50:26,156 - INFO - [raw sql] ()
2024-10-21 20:50:26,164 - INFO - select current_schema()
2024-10-21 20:50:26,164 - INFO - [raw sql] ()
2024-10-21 20:50:26,164 - INFO - show standard_conforming_strings
2024-10-21 20:50:26,164 - INFO - [raw sql] ()
2024-10-21 20:50:26,164 - INFO - BEGIN (implicit)
2024-10-21 20:50:26,164 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:50:26,164 - INFO - [generated in 0.00021s] ('P001', 'Продукт 1', 100)
2024-10-21 20:50:26,164 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:50:26,164 - INFO - COMMIT
2024-10-21 20:50:26,183 - INFO - BEGIN (implicit)
2024-10-21 20:50:26,183 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:50:26,183 - INFO - [cached since 0.01547s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:50:26,183 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:50:26,183 - INFO - COMMIT
2024-10-21 20:50:27,358 - INFO - select pg_catalog.version()
2024-10-21 20:50:27,358 - INFO - [raw sql] ()
2024-10-21 20:50:27,361 - INFO - select current_schema()
2024-10-21 20:50:27,361 - INFO - [raw sql] ()
2024-10-21 20:50:27,361 - INFO - show standard_conforming_strings
2024-10-21 20:50:27,361 - INFO - [raw sql] ()
2024-10-21 20:50:27,361 - INFO - BEGIN (implicit)
2024-10-21 20:50:27,377 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:50:27,377 - INFO - [generated in 0.00037s] ('P001',)
2024-10-21 20:50:35,242 - INFO - ROLLBACK
2024-10-21 20:51:09,918 - INFO - select pg_catalog.version()
2024-10-21 20:51:09,918 - INFO - [raw sql] ()
2024-10-21 20:51:09,918 - INFO - select current_schema()
2024-10-21 20:51:09,918 - INFO - [raw sql] ()
2024-10-21 20:51:09,918 - INFO - show standard_conforming_strings
2024-10-21 20:51:09,918 - INFO - [raw sql] ()
2024-10-21 20:51:09,926 - INFO - BEGIN (implicit)
2024-10-21 20:51:09,926 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:51:09,926 - INFO - [generated in 0.00015s] ()
2024-10-21 20:51:09,926 - INFO - COMMIT
2024-10-21 20:51:10,150 - INFO - select pg_catalog.version()
2024-10-21 20:51:10,150 - INFO - [raw sql] ()
2024-10-21 20:51:10,151 - INFO - select current_schema()
2024-10-21 20:51:10,151 - INFO - [raw sql] ()
2024-10-21 20:51:10,156 - INFO - show standard_conforming_strings
2024-10-21 20:51:10,156 - INFO - [raw sql] ()
2024-10-21 20:51:10,156 - INFO - BEGIN (implicit)
2024-10-21 20:51:10,156 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:51:10,164 - INFO - [generated in 0.00030s] ()
2024-10-21 20:51:10,164 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:51:10,164 - INFO - [generated in 0.00037s] ()
2024-10-21 20:51:10,172 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:51:10,173 - INFO - COMMIT
2024-10-21 20:51:10,240 - INFO - select pg_catalog.version()
2024-10-21 20:51:10,240 - INFO - [raw sql] ()
2024-10-21 20:51:10,247 - INFO - select current_schema()
2024-10-21 20:51:10,248 - INFO - [raw sql] ()
2024-10-21 20:51:10,248 - INFO - show standard_conforming_strings
2024-10-21 20:51:10,248 - INFO - [raw sql] ()
2024-10-21 20:51:10,248 - INFO - BEGIN (implicit)
2024-10-21 20:51:10,248 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:51:10,248 - INFO - [generated in 0.00031s] ('P001', 'Продукт 1', 100)
2024-10-21 20:51:10,248 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:51:10,254 - INFO - COMMIT
2024-10-21 20:51:10,266 - INFO - BEGIN (implicit)
2024-10-21 20:51:10,266 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:51:10,266 - INFO - [cached since 0.01528s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:51:10,266 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:51:10,266 - INFO - COMMIT
2024-10-21 20:51:11,553 - INFO - select pg_catalog.version()
2024-10-21 20:51:11,553 - INFO - [raw sql] ()
2024-10-21 20:51:11,561 - INFO - select current_schema()
2024-10-21 20:51:11,561 - INFO - [raw sql] ()
2024-10-21 20:51:11,561 - INFO - show standard_conforming_strings
2024-10-21 20:51:11,561 - INFO - [raw sql] ()
2024-10-21 20:51:11,561 - INFO - BEGIN (implicit)
2024-10-21 20:51:11,577 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:51:11,577 - INFO - [generated in 0.00028s] ('P001',)
2024-10-21 20:51:13,792 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 20:51:13,792 - INFO - [generated in 0.00035s] (99, 'P001')
2024-10-21 20:51:26,386 - INFO - ROLLBACK
2024-10-21 20:52:01,414 - INFO - select pg_catalog.version()
2024-10-21 20:52:01,414 - INFO - [raw sql] ()
2024-10-21 20:52:01,420 - INFO - select current_schema()
2024-10-21 20:52:01,420 - INFO - [raw sql] ()
2024-10-21 20:52:01,420 - INFO - show standard_conforming_strings
2024-10-21 20:52:01,420 - INFO - [raw sql] ()
2024-10-21 20:52:01,426 - INFO - BEGIN (implicit)
2024-10-21 20:52:01,426 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:52:01,426 - INFO - [generated in 0.00019s] ()
2024-10-21 20:52:01,428 - INFO - COMMIT
2024-10-21 20:52:01,603 - INFO - select pg_catalog.version()
2024-10-21 20:52:01,603 - INFO - [raw sql] ()
2024-10-21 20:52:01,603 - INFO - select current_schema()
2024-10-21 20:52:01,603 - INFO - [raw sql] ()
2024-10-21 20:52:01,610 - INFO - show standard_conforming_strings
2024-10-21 20:52:01,611 - INFO - [raw sql] ()
2024-10-21 20:52:01,612 - INFO - BEGIN (implicit)
2024-10-21 20:52:01,612 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:52:01,612 - INFO - [generated in 0.00015s] ()
2024-10-21 20:52:01,612 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:52:01,612 - INFO - [generated in 0.00014s] ()
2024-10-21 20:52:01,612 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:52:01,612 - INFO - COMMIT
2024-10-21 20:52:01,685 - INFO - select pg_catalog.version()
2024-10-21 20:52:01,685 - INFO - [raw sql] ()
2024-10-21 20:52:01,685 - INFO - select current_schema()
2024-10-21 20:52:01,685 - INFO - [raw sql] ()
2024-10-21 20:52:01,685 - INFO - show standard_conforming_strings
2024-10-21 20:52:01,685 - INFO - [raw sql] ()
2024-10-21 20:52:01,685 - INFO - BEGIN (implicit)
2024-10-21 20:52:01,685 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:52:01,685 - INFO - [generated in 0.00018s] ('P001', 'Продукт 1', 100)
2024-10-21 20:52:01,693 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:52:01,693 - INFO - COMMIT
2024-10-21 20:52:01,706 - INFO - BEGIN (implicit)
2024-10-21 20:52:01,706 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:52:01,706 - INFO - [cached since 0.01381s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:52:01,706 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:52:01,706 - INFO - COMMIT
2024-10-21 20:52:03,685 - INFO - select pg_catalog.version()
2024-10-21 20:52:03,686 - INFO - [raw sql] ()
2024-10-21 20:52:03,686 - INFO - select current_schema()
2024-10-21 20:52:03,686 - INFO - [raw sql] ()
2024-10-21 20:52:03,686 - INFO - show standard_conforming_strings
2024-10-21 20:52:03,686 - INFO - [raw sql] ()
2024-10-21 20:52:03,692 - INFO - BEGIN (implicit)
2024-10-21 20:52:03,703 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:52:03,703 - INFO - [generated in 0.00042s] ('P001',)
2024-10-21 20:52:11,676 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 20:52:11,676 - INFO - [generated in 0.00029s] (99, 'P001')
2024-10-21 20:52:13,908 - INFO - ROLLBACK
2024-10-21 20:52:16,428 - INFO - BEGIN (implicit)
2024-10-21 20:52:16,429 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:52:16,429 - INFO - [cached since 12.72s ago] ('P001',)
2024-10-21 20:52:16,431 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 20:52:16,431 - INFO - [cached since 4.756s ago] (99, 'P001')
2024-10-21 20:52:19,622 - INFO - ROLLBACK
2024-10-21 20:57:15,193 - INFO - select pg_catalog.version()
2024-10-21 20:57:15,193 - INFO - [raw sql] ()
2024-10-21 20:57:15,202 - INFO - select current_schema()
2024-10-21 20:57:15,202 - INFO - [raw sql] ()
2024-10-21 20:57:15,202 - INFO - show standard_conforming_strings
2024-10-21 20:57:15,202 - INFO - [raw sql] ()
2024-10-21 20:57:15,202 - INFO - BEGIN (implicit)
2024-10-21 20:57:15,202 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 20:57:15,202 - INFO - [generated in 0.00016s] ()
2024-10-21 20:57:15,202 - INFO - COMMIT
2024-10-21 20:57:15,268 - INFO - select pg_catalog.version()
2024-10-21 20:57:15,268 - INFO - [raw sql] ()
2024-10-21 20:57:15,268 - INFO - select current_schema()
2024-10-21 20:57:15,268 - INFO - [raw sql] ()
2024-10-21 20:57:15,268 - INFO - show standard_conforming_strings
2024-10-21 20:57:15,268 - INFO - [raw sql] ()
2024-10-21 20:57:15,268 - INFO - BEGIN (implicit)
2024-10-21 20:57:15,268 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 20:57:15,268 - INFO - [generated in 0.00011s] ()
2024-10-21 20:57:15,275 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 20:57:15,275 - INFO - [generated in 0.00014s] ()
2024-10-21 20:57:15,276 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 20:57:15,276 - INFO - COMMIT
2024-10-21 20:57:15,349 - INFO - select pg_catalog.version()
2024-10-21 20:57:15,349 - INFO - [raw sql] ()
2024-10-21 20:57:15,349 - INFO - select current_schema()
2024-10-21 20:57:15,349 - INFO - [raw sql] ()
2024-10-21 20:57:15,357 - INFO - show standard_conforming_strings
2024-10-21 20:57:15,357 - INFO - [raw sql] ()
2024-10-21 20:57:15,357 - INFO - BEGIN (implicit)
2024-10-21 20:57:15,357 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:57:15,357 - INFO - [generated in 0.00018s] ('P001', 'Продукт 1', 100)
2024-10-21 20:57:15,357 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 20:57:15,357 - INFO - COMMIT
2024-10-21 20:57:15,366 - INFO - BEGIN (implicit)
2024-10-21 20:57:15,366 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 20:57:15,366 - INFO - [cached since 0.009175s ago] ('P002', 'Продукт 2', 150)
2024-10-21 20:57:15,366 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 20:57:15,366 - INFO - COMMIT
2024-10-21 20:57:16,384 - INFO - select pg_catalog.version()
2024-10-21 20:57:16,384 - INFO - [raw sql] ()
2024-10-21 20:57:16,390 - INFO - select current_schema()
2024-10-21 20:57:16,390 - INFO - [raw sql] ()
2024-10-21 20:57:16,390 - INFO - show standard_conforming_strings
2024-10-21 20:57:16,390 - INFO - [raw sql] ()
2024-10-21 20:57:16,390 - INFO - BEGIN (implicit)
2024-10-21 20:57:16,409 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:57:16,409 - INFO - [generated in 0.00030s] ('P001',)
2024-10-21 20:57:16,415 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 20:57:16,415 - INFO - [generated in 0.00024s] (99, 'P001')
2024-10-21 20:57:19,425 - INFO - ROLLBACK
2024-10-21 20:57:26,401 - INFO - BEGIN (implicit)
2024-10-21 20:57:26,404 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 20:57:26,404 - INFO - [cached since 9.995s ago] ('P001',)
2024-10-21 20:57:26,404 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 20:57:26,404 - INFO - [cached since 9.991s ago] (99, 'P001')
2024-10-21 20:57:26,404 - INFO - ROLLBACK
2024-10-21 21:00:53,831 - INFO - select pg_catalog.version()
2024-10-21 21:00:53,831 - INFO - [raw sql] ()
2024-10-21 21:00:53,838 - INFO - select current_schema()
2024-10-21 21:00:53,838 - INFO - [raw sql] ()
2024-10-21 21:00:53,839 - INFO - show standard_conforming_strings
2024-10-21 21:00:53,839 - INFO - [raw sql] ()
2024-10-21 21:00:53,840 - INFO - BEGIN (implicit)
2024-10-21 21:00:53,840 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:00:53,840 - INFO - [generated in 0.00016s] ()
2024-10-21 21:00:53,840 - INFO - COMMIT
2024-10-21 21:00:53,911 - INFO - select pg_catalog.version()
2024-10-21 21:00:53,911 - INFO - [raw sql] ()
2024-10-21 21:00:53,912 - INFO - select current_schema()
2024-10-21 21:00:53,912 - INFO - [raw sql] ()
2024-10-21 21:00:53,912 - INFO - show standard_conforming_strings
2024-10-21 21:00:53,912 - INFO - [raw sql] ()
2024-10-21 21:00:53,912 - INFO - BEGIN (implicit)
2024-10-21 21:00:53,912 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:00:53,912 - INFO - [generated in 0.00011s] ()
2024-10-21 21:00:53,912 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:00:53,912 - INFO - [generated in 0.00013s] ()
2024-10-21 21:00:53,912 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:00:53,912 - INFO - COMMIT
2024-10-21 21:00:53,978 - INFO - select pg_catalog.version()
2024-10-21 21:00:53,978 - INFO - [raw sql] ()
2024-10-21 21:00:53,985 - INFO - select current_schema()
2024-10-21 21:00:53,985 - INFO - [raw sql] ()
2024-10-21 21:00:53,985 - INFO - show standard_conforming_strings
2024-10-21 21:00:53,985 - INFO - [raw sql] ()
2024-10-21 21:00:53,985 - INFO - BEGIN (implicit)
2024-10-21 21:00:53,985 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:00:53,985 - INFO - [generated in 0.00021s] ('P001', 'Продукт 1', 100)
2024-10-21 21:00:53,985 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:00:53,985 - INFO - COMMIT
2024-10-21 21:00:53,995 - INFO - BEGIN (implicit)
2024-10-21 21:00:53,995 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:00:53,995 - INFO - [cached since 0.007578s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:00:53,995 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:00:53,995 - INFO - COMMIT
2024-10-21 21:01:13,912 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 21:01:25,248 - INFO - select pg_catalog.version()
2024-10-21 21:01:25,256 - INFO - [raw sql] ()
2024-10-21 21:01:25,256 - INFO - select current_schema()
2024-10-21 21:01:25,256 - INFO - [raw sql] ()
2024-10-21 21:01:25,256 - INFO - show standard_conforming_strings
2024-10-21 21:01:25,256 - INFO - [raw sql] ()
2024-10-21 21:01:25,256 - INFO - BEGIN (implicit)
2024-10-21 21:01:25,256 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:01:25,256 - INFO - [generated in 0.00014s] ()
2024-10-21 21:01:25,265 - INFO - COMMIT
2024-10-21 21:01:25,331 - INFO - select pg_catalog.version()
2024-10-21 21:01:25,331 - INFO - [raw sql] ()
2024-10-21 21:01:25,331 - INFO - select current_schema()
2024-10-21 21:01:25,331 - INFO - [raw sql] ()
2024-10-21 21:01:25,331 - INFO - show standard_conforming_strings
2024-10-21 21:01:25,331 - INFO - [raw sql] ()
2024-10-21 21:01:25,331 - INFO - BEGIN (implicit)
2024-10-21 21:01:25,331 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:01:25,331 - INFO - [generated in 0.00013s] ()
2024-10-21 21:01:25,339 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:01:25,339 - INFO - [generated in 0.00014s] ()
2024-10-21 21:01:25,339 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:01:25,339 - INFO - COMMIT
2024-10-21 21:01:25,404 - INFO - select pg_catalog.version()
2024-10-21 21:01:25,404 - INFO - [raw sql] ()
2024-10-21 21:01:25,404 - INFO - select current_schema()
2024-10-21 21:01:25,404 - INFO - [raw sql] ()
2024-10-21 21:01:25,404 - INFO - show standard_conforming_strings
2024-10-21 21:01:25,404 - INFO - [raw sql] ()
2024-10-21 21:01:25,404 - INFO - BEGIN (implicit)
2024-10-21 21:01:25,404 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:01:25,404 - INFO - [generated in 0.00018s] ('P001', 'Продукт 1', 100)
2024-10-21 21:01:25,411 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:01:25,411 - INFO - COMMIT
2024-10-21 21:01:25,423 - INFO - BEGIN (implicit)
2024-10-21 21:01:25,423 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:01:25,423 - INFO - [cached since 0.01397s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:01:25,423 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:01:25,423 - INFO - COMMIT
2024-10-21 21:01:53,845 - INFO - select pg_catalog.version()
2024-10-21 21:01:53,845 - INFO - [raw sql] ()
2024-10-21 21:01:53,853 - INFO - select current_schema()
2024-10-21 21:01:53,853 - INFO - [raw sql] ()
2024-10-21 21:01:53,853 - INFO - show standard_conforming_strings
2024-10-21 21:01:53,853 - INFO - [raw sql] ()
2024-10-21 21:01:53,853 - INFO - BEGIN (implicit)
2024-10-21 21:01:53,870 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:01:53,871 - INFO - [generated in 0.00036s] ('P001',)
2024-10-21 21:01:53,871 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 21:01:53,871 - INFO - [generated in 0.00020s] (99, 'P001')
2024-10-21 21:01:53,883 - INFO - ROLLBACK
2024-10-21 21:02:13,208 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 21:02:22,030 - INFO - select pg_catalog.version()
2024-10-21 21:02:22,030 - INFO - [raw sql] ()
2024-10-21 21:02:22,042 - INFO - select current_schema()
2024-10-21 21:02:22,042 - INFO - [raw sql] ()
2024-10-21 21:02:22,042 - INFO - show standard_conforming_strings
2024-10-21 21:02:22,042 - INFO - [raw sql] ()
2024-10-21 21:02:22,045 - INFO - BEGIN (implicit)
2024-10-21 21:02:22,045 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:02:22,045 - INFO - [generated in 0.00014s] ()
2024-10-21 21:02:22,047 - INFO - COMMIT
2024-10-21 21:02:22,111 - INFO - select pg_catalog.version()
2024-10-21 21:02:22,111 - INFO - [raw sql] ()
2024-10-21 21:02:22,111 - INFO - select current_schema()
2024-10-21 21:02:22,111 - INFO - [raw sql] ()
2024-10-21 21:02:22,111 - INFO - show standard_conforming_strings
2024-10-21 21:02:22,111 - INFO - [raw sql] ()
2024-10-21 21:02:22,111 - INFO - BEGIN (implicit)
2024-10-21 21:02:22,111 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:02:22,111 - INFO - [generated in 0.00011s] ()
2024-10-21 21:02:22,119 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:02:22,119 - INFO - [generated in 0.00013s] ()
2024-10-21 21:02:22,119 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:02:22,119 - INFO - COMMIT
2024-10-21 21:02:22,186 - INFO - select pg_catalog.version()
2024-10-21 21:02:22,186 - INFO - [raw sql] ()
2024-10-21 21:02:22,186 - INFO - select current_schema()
2024-10-21 21:02:22,186 - INFO - [raw sql] ()
2024-10-21 21:02:22,186 - INFO - show standard_conforming_strings
2024-10-21 21:02:22,186 - INFO - [raw sql] ()
2024-10-21 21:02:22,186 - INFO - BEGIN (implicit)
2024-10-21 21:02:22,186 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:02:22,186 - INFO - [generated in 0.00017s] ('P001', 'Продукт 1', 100)
2024-10-21 21:02:22,194 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:02:22,195 - INFO - COMMIT
2024-10-21 21:02:22,205 - INFO - BEGIN (implicit)
2024-10-21 21:02:22,205 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:02:22,205 - INFO - [cached since 0.01358s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:02:22,205 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:02:22,205 - INFO - COMMIT
2024-10-21 21:02:25,299 - INFO - select pg_catalog.version()
2024-10-21 21:02:25,299 - INFO - [raw sql] ()
2024-10-21 21:02:25,299 - INFO - select current_schema()
2024-10-21 21:02:25,299 - INFO - [raw sql] ()
2024-10-21 21:02:25,299 - INFO - show standard_conforming_strings
2024-10-21 21:02:25,305 - INFO - [raw sql] ()
2024-10-21 21:02:25,306 - INFO - BEGIN (implicit)
2024-10-21 21:02:25,313 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:02:25,313 - INFO - [generated in 0.00021s] ('P001',)
2024-10-21 21:02:25,321 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 21:02:25,321 - INFO - [generated in 0.00020s] (99, 'P001')
2024-10-21 21:02:25,321 - INFO - ROLLBACK
2024-10-21 21:03:13,881 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 21:03:23,207 - INFO - select pg_catalog.version()
2024-10-21 21:03:23,207 - INFO - [raw sql] ()
2024-10-21 21:03:23,214 - INFO - select current_schema()
2024-10-21 21:03:23,214 - INFO - [raw sql] ()
2024-10-21 21:03:23,214 - INFO - show standard_conforming_strings
2024-10-21 21:03:23,214 - INFO - [raw sql] ()
2024-10-21 21:03:23,214 - INFO - BEGIN (implicit)
2024-10-21 21:03:23,214 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:03:23,214 - INFO - [generated in 0.00015s] ()
2024-10-21 21:03:23,222 - INFO - COMMIT
2024-10-21 21:03:23,290 - INFO - select pg_catalog.version()
2024-10-21 21:03:23,290 - INFO - [raw sql] ()
2024-10-21 21:03:23,290 - INFO - select current_schema()
2024-10-21 21:03:23,290 - INFO - [raw sql] ()
2024-10-21 21:03:23,295 - INFO - show standard_conforming_strings
2024-10-21 21:03:23,295 - INFO - [raw sql] ()
2024-10-21 21:03:23,299 - INFO - BEGIN (implicit)
2024-10-21 21:03:23,299 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:03:23,299 - INFO - [generated in 0.00016s] ()
2024-10-21 21:03:23,302 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:03:23,302 - INFO - [generated in 0.00017s] ()
2024-10-21 21:03:23,302 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:03:23,302 - INFO - COMMIT
2024-10-21 21:03:23,374 - INFO - select pg_catalog.version()
2024-10-21 21:03:23,374 - INFO - [raw sql] ()
2024-10-21 21:03:23,376 - INFO - select current_schema()
2024-10-21 21:03:23,376 - INFO - [raw sql] ()
2024-10-21 21:03:23,377 - INFO - show standard_conforming_strings
2024-10-21 21:03:23,377 - INFO - [raw sql] ()
2024-10-21 21:03:23,380 - INFO - BEGIN (implicit)
2024-10-21 21:03:23,380 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:03:23,380 - INFO - [generated in 0.00016s] ('P001', 'Продукт 1', 100)
2024-10-21 21:03:23,380 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:03:23,380 - INFO - COMMIT
2024-10-21 21:03:23,388 - INFO - BEGIN (implicit)
2024-10-21 21:03:23,388 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:03:23,388 - INFO - [cached since 0.009709s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:03:23,388 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:03:23,388 - INFO - COMMIT
2024-10-21 21:05:11,093 - INFO - select pg_catalog.version()
2024-10-21 21:05:11,093 - INFO - [raw sql] ()
2024-10-21 21:05:11,096 - INFO - select current_schema()
2024-10-21 21:05:11,096 - INFO - [raw sql] ()
2024-10-21 21:05:11,098 - INFO - show standard_conforming_strings
2024-10-21 21:05:11,098 - INFO - [raw sql] ()
2024-10-21 21:05:11,100 - INFO - BEGIN (implicit)
2024-10-21 21:05:11,109 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:05:11,109 - INFO - [generated in 0.00024s] ('P001',)
2024-10-21 21:05:11,117 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 21:05:11,117 - INFO - [generated in 0.00020s] (99, 'P001')
2024-10-21 21:05:11,117 - INFO - Резервация '101' успешно добавлена.
2024-10-21 21:05:11,117 - INFO - INSERT INTO reservations (reservation_id, product_id, quantity, timestamp, status) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITH TIME ZONE, $5::VARCHAR) RETURNING reservations.id
2024-10-21 21:05:11,125 - INFO - [generated in 0.00046s] ('101', 'P001', 1, datetime.datetime(2024, 10, 21, 21, 5, 11, 117067), 'success')
2024-10-21 21:05:11,144 - INFO - COMMIT
2024-10-21 21:06:43,080 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 21:06:52,785 - INFO - select pg_catalog.version()
2024-10-21 21:06:52,785 - INFO - [raw sql] ()
2024-10-21 21:06:52,790 - INFO - select current_schema()
2024-10-21 21:06:52,790 - INFO - [raw sql] ()
2024-10-21 21:06:52,792 - INFO - show standard_conforming_strings
2024-10-21 21:06:52,792 - INFO - [raw sql] ()
2024-10-21 21:06:52,793 - INFO - BEGIN (implicit)
2024-10-21 21:06:52,794 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:06:52,794 - INFO - [generated in 0.00016s] ()
2024-10-21 21:06:52,795 - INFO - COMMIT
2024-10-21 21:06:52,868 - INFO - select pg_catalog.version()
2024-10-21 21:06:52,868 - INFO - [raw sql] ()
2024-10-21 21:06:52,870 - INFO - select current_schema()
2024-10-21 21:06:52,870 - INFO - [raw sql] ()
2024-10-21 21:06:52,872 - INFO - show standard_conforming_strings
2024-10-21 21:06:52,872 - INFO - [raw sql] ()
2024-10-21 21:06:52,873 - INFO - BEGIN (implicit)
2024-10-21 21:06:52,873 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:06:52,873 - INFO - [generated in 0.00014s] ()
2024-10-21 21:06:52,876 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:06:52,876 - INFO - [generated in 0.00014s] ()
2024-10-21 21:06:52,877 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:06:52,877 - INFO - COMMIT
2024-10-21 21:06:52,943 - INFO - select pg_catalog.version()
2024-10-21 21:06:52,944 - INFO - [raw sql] ()
2024-10-21 21:06:52,945 - INFO - select current_schema()
2024-10-21 21:06:52,945 - INFO - [raw sql] ()
2024-10-21 21:06:52,948 - INFO - show standard_conforming_strings
2024-10-21 21:06:52,948 - INFO - [raw sql] ()
2024-10-21 21:06:52,955 - INFO - BEGIN (implicit)
2024-10-21 21:06:52,955 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:06:52,955 - INFO - [generated in 0.00016s] ('P001', 'Продукт 1', 100)
2024-10-21 21:06:52,957 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:06:52,957 - INFO - COMMIT
2024-10-21 21:06:52,965 - INFO - BEGIN (implicit)
2024-10-21 21:06:52,965 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:06:52,965 - INFO - [cached since 0.009847s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:06:52,966 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:06:52,966 - INFO - COMMIT
2024-10-21 21:06:54,580 - INFO - select pg_catalog.version()
2024-10-21 21:06:54,580 - INFO - [raw sql] ()
2024-10-21 21:06:54,583 - INFO - select current_schema()
2024-10-21 21:06:54,583 - INFO - [raw sql] ()
2024-10-21 21:06:54,585 - INFO - show standard_conforming_strings
2024-10-21 21:06:54,585 - INFO - [raw sql] ()
2024-10-21 21:06:54,587 - INFO - BEGIN (implicit)
2024-10-21 21:06:54,601 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:06:54,601 - INFO - [generated in 0.00033s] ('P001',)
2024-10-21 21:06:54,607 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 21:06:54,607 - INFO - [generated in 0.00027s] (99, 'P001')
2024-10-21 21:06:54,609 - INFO - Резервация '1101' успешно добавлена.
2024-10-21 21:06:54,611 - INFO - INSERT INTO reservations (reservation_id, product_id, quantity, timestamp, status) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITH TIME ZONE, $5::VARCHAR) RETURNING reservations.id
2024-10-21 21:06:54,612 - INFO - [generated in 0.00044s] ('1101', 'P001', 1, datetime.datetime(2024, 10, 21, 21, 6, 54, 609198), 'success')
2024-10-21 21:06:54,614 - INFO - COMMIT
2024-10-21 21:07:52,189 - INFO - select pg_catalog.version()
2024-10-21 21:07:52,190 - INFO - [raw sql] ()
2024-10-21 21:07:52,194 - INFO - select current_schema()
2024-10-21 21:07:52,194 - INFO - [raw sql] ()
2024-10-21 21:07:52,196 - INFO - show standard_conforming_strings
2024-10-21 21:07:52,200 - INFO - [raw sql] ()
2024-10-21 21:07:52,201 - INFO - BEGIN (implicit)
2024-10-21 21:07:52,202 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:07:52,202 - INFO - [generated in 0.00016s] ()
2024-10-21 21:07:52,204 - INFO - COMMIT
2024-10-21 21:07:52,268 - INFO - select pg_catalog.version()
2024-10-21 21:07:52,268 - INFO - [raw sql] ()
2024-10-21 21:07:52,271 - INFO - select current_schema()
2024-10-21 21:07:52,271 - INFO - [raw sql] ()
2024-10-21 21:07:52,272 - INFO - show standard_conforming_strings
2024-10-21 21:07:52,272 - INFO - [raw sql] ()
2024-10-21 21:07:52,273 - INFO - BEGIN (implicit)
2024-10-21 21:07:52,273 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:07:52,273 - INFO - [generated in 0.00012s] ()
2024-10-21 21:07:52,275 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:07:52,275 - INFO - [generated in 0.00013s] ()
2024-10-21 21:07:52,276 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:07:52,276 - INFO - COMMIT
2024-10-21 21:07:52,339 - INFO - select pg_catalog.version()
2024-10-21 21:07:52,339 - INFO - [raw sql] ()
2024-10-21 21:07:52,341 - INFO - select current_schema()
2024-10-21 21:07:52,341 - INFO - [raw sql] ()
2024-10-21 21:07:52,343 - INFO - show standard_conforming_strings
2024-10-21 21:07:52,343 - INFO - [raw sql] ()
2024-10-21 21:07:52,344 - INFO - BEGIN (implicit)
2024-10-21 21:07:52,344 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:07:52,344 - INFO - [generated in 0.00017s] ('P001', 'Продукт 1', 100)
2024-10-21 21:07:52,346 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:07:52,346 - INFO - COMMIT
2024-10-21 21:07:52,358 - INFO - BEGIN (implicit)
2024-10-21 21:07:52,359 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:07:52,359 - INFO - [cached since 0.01503s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:07:52,360 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:07:52,360 - INFO - COMMIT
2024-10-21 21:07:53,084 - INFO - select pg_catalog.version()
2024-10-21 21:07:53,084 - INFO - [raw sql] ()
2024-10-21 21:07:53,086 - INFO - select current_schema()
2024-10-21 21:07:53,086 - INFO - [raw sql] ()
2024-10-21 21:07:53,089 - INFO - show standard_conforming_strings
2024-10-21 21:07:53,089 - INFO - [raw sql] ()
2024-10-21 21:07:53,091 - INFO - BEGIN (implicit)
2024-10-21 21:07:53,103 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:07:53,103 - INFO - [generated in 0.00021s] ('P001',)
2024-10-21 21:07:53,108 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 21:07:53,108 - INFO - [generated in 0.00020s] (99, 'P001')
2024-10-21 21:07:53,110 - INFO - Резервация '1101' успешно добавлена.
2024-10-21 21:07:53,113 - INFO - INSERT INTO reservations (reservation_id, product_id, quantity, timestamp, status) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITH TIME ZONE, $5::VARCHAR) RETURNING reservations.id
2024-10-21 21:07:53,113 - INFO - [generated in 0.00038s] ('1101', 'P001', 1, datetime.datetime(2024, 10, 21, 21, 7, 53, 110384), 'success')
2024-10-21 21:07:53,126 - INFO - ROLLBACK
2024-10-21 21:08:02,238 - INFO - BEGIN (implicit)
2024-10-21 21:08:02,238 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:08:02,238 - INFO - [cached since 9.136s ago] ('P001',)
2024-10-21 21:08:02,241 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 21:08:02,241 - INFO - [cached since 9.133s ago] (99, 'P001')
2024-10-21 21:08:02,243 - INFO - Резервация '11501' успешно добавлена.
2024-10-21 21:08:02,243 - INFO - INSERT INTO reservations (reservation_id, product_id, quantity, timestamp, status) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITH TIME ZONE, $5::VARCHAR) RETURNING reservations.id
2024-10-21 21:08:02,244 - INFO - [cached since 9.132s ago] ('11501', 'P001', 1, datetime.datetime(2024, 10, 21, 21, 8, 2, 243984), 'success')
2024-10-21 21:08:02,246 - INFO - COMMIT
2024-10-21 21:08:18,549 - INFO - BEGIN (implicit)
2024-10-21 21:08:18,549 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:08:18,549 - INFO - [cached since 25.45s ago] ('P001',)
2024-10-21 21:08:18,551 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 21:08:18,551 - INFO - [cached since 25.44s ago] (98, 'P001')
2024-10-21 21:08:18,552 - INFO - Резервация '11501' успешно добавлена.
2024-10-21 21:08:18,552 - INFO - INSERT INTO reservations (reservation_id, product_id, quantity, timestamp, status) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITH TIME ZONE, $5::VARCHAR) RETURNING reservations.id
2024-10-21 21:08:18,552 - INFO - [cached since 25.44s ago] ('11501', 'P001', 1, datetime.datetime(2024, 10, 21, 21, 8, 18, 552608), 'success')
2024-10-21 21:08:18,554 - INFO - ROLLBACK
2024-10-21 21:08:23,434 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 21:08:32,330 - INFO - select pg_catalog.version()
2024-10-21 21:08:32,330 - INFO - [raw sql] ()
2024-10-21 21:08:32,334 - INFO - select current_schema()
2024-10-21 21:08:32,335 - INFO - [raw sql] ()
2024-10-21 21:08:32,337 - INFO - show standard_conforming_strings
2024-10-21 21:08:32,337 - INFO - [raw sql] ()
2024-10-21 21:08:32,338 - INFO - BEGIN (implicit)
2024-10-21 21:08:32,339 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:08:32,339 - INFO - [generated in 0.00015s] ()
2024-10-21 21:08:32,341 - INFO - COMMIT
2024-10-21 21:08:32,408 - INFO - select pg_catalog.version()
2024-10-21 21:08:32,408 - INFO - [raw sql] ()
2024-10-21 21:08:32,410 - INFO - select current_schema()
2024-10-21 21:08:32,410 - INFO - [raw sql] ()
2024-10-21 21:08:32,411 - INFO - show standard_conforming_strings
2024-10-21 21:08:32,411 - INFO - [raw sql] ()
2024-10-21 21:08:32,412 - INFO - BEGIN (implicit)
2024-10-21 21:08:32,412 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:08:32,412 - INFO - [generated in 0.00011s] ()
2024-10-21 21:08:32,414 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:08:32,415 - INFO - [generated in 0.00016s] ()
2024-10-21 21:08:32,415 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:08:32,416 - INFO - COMMIT
2024-10-21 21:08:32,484 - INFO - select pg_catalog.version()
2024-10-21 21:08:32,484 - INFO - [raw sql] ()
2024-10-21 21:08:32,488 - INFO - select current_schema()
2024-10-21 21:08:32,488 - INFO - [raw sql] ()
2024-10-21 21:08:32,490 - INFO - show standard_conforming_strings
2024-10-21 21:08:32,490 - INFO - [raw sql] ()
2024-10-21 21:08:32,492 - INFO - BEGIN (implicit)
2024-10-21 21:08:32,493 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:08:32,493 - INFO - [generated in 0.00023s] ('P001', 'Продукт 1', 100)
2024-10-21 21:08:32,495 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:08:32,495 - INFO - COMMIT
2024-10-21 21:08:32,508 - INFO - BEGIN (implicit)
2024-10-21 21:08:32,508 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:08:32,508 - INFO - [cached since 0.01528s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:08:32,509 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:08:32,509 - INFO - COMMIT
2024-10-21 21:08:32,866 - INFO - select pg_catalog.version()
2024-10-21 21:08:32,866 - INFO - [raw sql] ()
2024-10-21 21:08:32,868 - INFO - select current_schema()
2024-10-21 21:08:32,869 - INFO - [raw sql] ()
2024-10-21 21:08:32,871 - INFO - show standard_conforming_strings
2024-10-21 21:08:32,871 - INFO - [raw sql] ()
2024-10-21 21:08:32,872 - INFO - BEGIN (implicit)
2024-10-21 21:08:32,885 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:08:32,885 - INFO - [generated in 0.00051s] ('P001',)
2024-10-21 21:09:18,367 - INFO - select pg_catalog.version()
2024-10-21 21:09:18,368 - INFO - [raw sql] ()
2024-10-21 21:09:18,372 - INFO - select current_schema()
2024-10-21 21:09:18,372 - INFO - [raw sql] ()
2024-10-21 21:09:18,373 - INFO - show standard_conforming_strings
2024-10-21 21:09:18,373 - INFO - [raw sql] ()
2024-10-21 21:09:18,374 - INFO - BEGIN (implicit)
2024-10-21 21:09:18,375 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:09:18,375 - INFO - [generated in 0.00016s] ()
2024-10-21 21:09:18,376 - INFO - COMMIT
2024-10-21 21:09:18,437 - INFO - select pg_catalog.version()
2024-10-21 21:09:18,437 - INFO - [raw sql] ()
2024-10-21 21:09:18,439 - INFO - select current_schema()
2024-10-21 21:09:18,439 - INFO - [raw sql] ()
2024-10-21 21:09:18,440 - INFO - show standard_conforming_strings
2024-10-21 21:09:18,440 - INFO - [raw sql] ()
2024-10-21 21:09:18,442 - INFO - BEGIN (implicit)
2024-10-21 21:09:18,442 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:09:18,442 - INFO - [generated in 0.00012s] ()
2024-10-21 21:09:18,444 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:09:18,444 - INFO - [generated in 0.00012s] ()
2024-10-21 21:09:18,445 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:09:18,445 - INFO - COMMIT
2024-10-21 21:09:18,511 - INFO - select pg_catalog.version()
2024-10-21 21:09:18,511 - INFO - [raw sql] ()
2024-10-21 21:09:18,513 - INFO - select current_schema()
2024-10-21 21:09:18,513 - INFO - [raw sql] ()
2024-10-21 21:09:18,514 - INFO - show standard_conforming_strings
2024-10-21 21:09:18,515 - INFO - [raw sql] ()
2024-10-21 21:09:18,516 - INFO - BEGIN (implicit)
2024-10-21 21:09:18,516 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:09:18,517 - INFO - [generated in 0.00025s] ('P001', 'Продукт 1', 100)
2024-10-21 21:09:18,519 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:09:18,519 - INFO - COMMIT
2024-10-21 21:09:18,531 - INFO - BEGIN (implicit)
2024-10-21 21:09:18,532 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:09:18,532 - INFO - [cached since 0.01561s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:09:18,533 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:09:18,533 - INFO - COMMIT
2024-10-21 21:09:19,324 - INFO - select pg_catalog.version()
2024-10-21 21:09:19,324 - INFO - [raw sql] ()
2024-10-21 21:09:19,327 - INFO - select current_schema()
2024-10-21 21:09:19,329 - INFO - [raw sql] ()
2024-10-21 21:09:19,332 - INFO - show standard_conforming_strings
2024-10-21 21:09:19,332 - INFO - [raw sql] ()
2024-10-21 21:09:19,334 - INFO - BEGIN (implicit)
2024-10-21 21:09:19,349 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:09:19,349 - INFO - [generated in 0.00021s] ('P001',)
2024-10-21 21:09:19,355 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 21:09:19,355 - INFO - [generated in 0.00025s] (99, 'P001')
2024-10-21 21:09:19,358 - INFO - Резервация '11t501' успешно добавлена.
2024-10-21 21:09:19,360 - INFO - INSERT INTO reservations (reservation_id, product_id, quantity, timestamp, status) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITH TIME ZONE, $5::VARCHAR) RETURNING reservations.id
2024-10-21 21:09:19,360 - INFO - [generated in 0.00039s] ('11t501', 'P001', 1, datetime.datetime(2024, 10, 21, 21, 9, 19, 357515), 'success')
2024-10-21 21:09:19,363 - INFO - COMMIT
2024-10-21 21:10:20,396 - INFO - select pg_catalog.version()
2024-10-21 21:10:20,397 - INFO - [raw sql] ()
2024-10-21 21:10:20,401 - INFO - select current_schema()
2024-10-21 21:10:20,402 - INFO - [raw sql] ()
2024-10-21 21:10:20,403 - INFO - show standard_conforming_strings
2024-10-21 21:10:20,403 - INFO - [raw sql] ()
2024-10-21 21:10:20,404 - INFO - BEGIN (implicit)
2024-10-21 21:10:20,405 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:10:20,405 - INFO - [generated in 0.00015s] ()
2024-10-21 21:10:20,406 - INFO - COMMIT
2024-10-21 21:10:20,472 - INFO - select pg_catalog.version()
2024-10-21 21:10:20,472 - INFO - [raw sql] ()
2024-10-21 21:10:20,474 - INFO - select current_schema()
2024-10-21 21:10:20,474 - INFO - [raw sql] ()
2024-10-21 21:10:20,475 - INFO - show standard_conforming_strings
2024-10-21 21:10:20,475 - INFO - [raw sql] ()
2024-10-21 21:10:20,476 - INFO - BEGIN (implicit)
2024-10-21 21:10:20,476 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:10:20,476 - INFO - [generated in 0.00011s] ()
2024-10-21 21:10:20,478 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:10:20,478 - INFO - [generated in 0.00018s] ()
2024-10-21 21:10:20,479 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:10:20,479 - INFO - COMMIT
2024-10-21 21:10:20,548 - INFO - select pg_catalog.version()
2024-10-21 21:10:20,549 - INFO - [raw sql] ()
2024-10-21 21:10:20,550 - INFO - select current_schema()
2024-10-21 21:10:20,550 - INFO - [raw sql] ()
2024-10-21 21:10:20,552 - INFO - show standard_conforming_strings
2024-10-21 21:10:20,552 - INFO - [raw sql] ()
2024-10-21 21:10:20,552 - INFO - BEGIN (implicit)
2024-10-21 21:10:20,552 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:10:20,554 - INFO - [generated in 0.00017s] ('P001', 'Продукт 1', 100)
2024-10-21 21:10:20,555 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:10:20,555 - INFO - COMMIT
2024-10-21 21:10:20,563 - INFO - BEGIN (implicit)
2024-10-21 21:10:20,564 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:10:20,564 - INFO - [cached since 0.01006s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:10:20,565 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:10:20,565 - INFO - COMMIT
2024-10-21 21:10:24,727 - INFO - select pg_catalog.version()
2024-10-21 21:10:24,727 - INFO - [raw sql] ()
2024-10-21 21:10:24,732 - INFO - select current_schema()
2024-10-21 21:10:24,732 - INFO - [raw sql] ()
2024-10-21 21:10:24,737 - INFO - show standard_conforming_strings
2024-10-21 21:10:24,737 - INFO - [raw sql] ()
2024-10-21 21:10:24,739 - INFO - BEGIN (implicit)
2024-10-21 21:10:24,762 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:10:24,762 - INFO - [generated in 0.00039s] ('P001',)
2024-10-21 21:10:24,769 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 21:10:24,769 - INFO - [generated in 0.00034s] (99, 'P001')
2024-10-21 21:10:24,772 - INFO - Резервация '11ggt501' успешно добавлена.
2024-10-21 21:10:24,776 - INFO - INSERT INTO reservations (reservation_id, product_id, quantity, timestamp, status) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITH TIME ZONE, $5::VARCHAR) RETURNING reservations.id
2024-10-21 21:10:24,776 - INFO - [generated in 0.00062s] ('11ggt501', 'P001', 1, datetime.datetime(2024, 10, 21, 21, 10, 24, 772659), 'success')
2024-10-21 21:10:24,779 - INFO - COMMIT
2024-10-21 21:11:41,933 - INFO - BEGIN (implicit)
2024-10-21 21:11:41,933 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:11:41,934 - INFO - [cached since 77.17s ago] ('P001',)
2024-10-21 21:11:41,935 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 21:11:41,936 - INFO - [cached since 77.17s ago] (98, 'P001')
2024-10-21 21:11:41,937 - INFO - Резервация '11ggt501' успешно добавлена.
2024-10-21 21:11:41,937 - INFO - INSERT INTO reservations (reservation_id, product_id, quantity, timestamp, status) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITH TIME ZONE, $5::VARCHAR) RETURNING reservations.id
2024-10-21 21:11:41,937 - INFO - [cached since 77.16s ago] ('11ggt501', 'P001', 1, datetime.datetime(2024, 10, 21, 21, 11, 41, 936886), 'success')
2024-10-21 21:11:41,941 - INFO - ROLLBACK
2024-10-21 21:12:05,736 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 21:12:15,828 - INFO - select pg_catalog.version()
2024-10-21 21:12:15,828 - INFO - [raw sql] ()
2024-10-21 21:12:15,833 - INFO - select current_schema()
2024-10-21 21:12:15,833 - INFO - [raw sql] ()
2024-10-21 21:12:15,835 - INFO - show standard_conforming_strings
2024-10-21 21:12:15,835 - INFO - [raw sql] ()
2024-10-21 21:12:15,837 - INFO - BEGIN (implicit)
2024-10-21 21:12:15,837 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:12:15,838 - INFO - [generated in 0.00015s] ()
2024-10-21 21:12:15,839 - INFO - COMMIT
2024-10-21 21:12:15,908 - INFO - select pg_catalog.version()
2024-10-21 21:12:15,908 - INFO - [raw sql] ()
2024-10-21 21:12:15,911 - INFO - select current_schema()
2024-10-21 21:12:15,912 - INFO - [raw sql] ()
2024-10-21 21:12:15,913 - INFO - show standard_conforming_strings
2024-10-21 21:12:15,914 - INFO - [raw sql] ()
2024-10-21 21:12:15,915 - INFO - BEGIN (implicit)
2024-10-21 21:12:15,915 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:12:15,915 - INFO - [generated in 0.00014s] ()
2024-10-21 21:12:15,918 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:12:15,918 - INFO - [generated in 0.00018s] ()
2024-10-21 21:12:15,919 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:12:15,919 - INFO - COMMIT
2024-10-21 21:12:15,988 - INFO - select pg_catalog.version()
2024-10-21 21:12:15,988 - INFO - [raw sql] ()
2024-10-21 21:12:15,990 - INFO - select current_schema()
2024-10-21 21:12:15,990 - INFO - [raw sql] ()
2024-10-21 21:12:15,992 - INFO - show standard_conforming_strings
2024-10-21 21:12:15,992 - INFO - [raw sql] ()
2024-10-21 21:12:15,993 - INFO - BEGIN (implicit)
2024-10-21 21:12:15,993 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:12:15,994 - INFO - [generated in 0.00019s] ('P001', 'Продукт 1', 100)
2024-10-21 21:12:15,996 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:12:15,996 - INFO - COMMIT
2024-10-21 21:12:16,011 - INFO - BEGIN (implicit)
2024-10-21 21:12:16,011 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:12:16,011 - INFO - [cached since 0.01769s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:12:16,012 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:12:16,012 - INFO - COMMIT
2024-10-21 21:12:40,519 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 21:12:51,778 - INFO - select pg_catalog.version()
2024-10-21 21:12:51,778 - INFO - [raw sql] ()
2024-10-21 21:12:51,782 - INFO - select current_schema()
2024-10-21 21:12:51,782 - INFO - [raw sql] ()
2024-10-21 21:12:51,784 - INFO - show standard_conforming_strings
2024-10-21 21:12:51,784 - INFO - [raw sql] ()
2024-10-21 21:12:51,785 - INFO - BEGIN (implicit)
2024-10-21 21:12:51,786 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:12:51,786 - INFO - [generated in 0.00023s] ()
2024-10-21 21:12:51,788 - INFO - COMMIT
2024-10-21 21:12:51,852 - INFO - select pg_catalog.version()
2024-10-21 21:12:51,852 - INFO - [raw sql] ()
2024-10-21 21:12:51,853 - INFO - select current_schema()
2024-10-21 21:12:51,853 - INFO - [raw sql] ()
2024-10-21 21:12:51,855 - INFO - show standard_conforming_strings
2024-10-21 21:12:51,855 - INFO - [raw sql] ()
2024-10-21 21:12:51,856 - INFO - BEGIN (implicit)
2024-10-21 21:12:51,856 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:12:51,857 - INFO - [generated in 0.00015s] ()
2024-10-21 21:12:51,858 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:12:51,858 - INFO - [generated in 0.00016s] ()
2024-10-21 21:12:51,860 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:12:51,860 - INFO - COMMIT
2024-10-21 21:12:51,922 - INFO - select pg_catalog.version()
2024-10-21 21:12:51,922 - INFO - [raw sql] ()
2024-10-21 21:12:51,924 - INFO - select current_schema()
2024-10-21 21:12:51,924 - INFO - [raw sql] ()
2024-10-21 21:12:51,925 - INFO - show standard_conforming_strings
2024-10-21 21:12:51,926 - INFO - [raw sql] ()
2024-10-21 21:12:51,926 - INFO - BEGIN (implicit)
2024-10-21 21:12:51,927 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:12:51,927 - INFO - [generated in 0.00017s] ('P001', 'Продукт 1', 100)
2024-10-21 21:12:51,929 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:12:51,929 - INFO - COMMIT
2024-10-21 21:12:51,940 - INFO - BEGIN (implicit)
2024-10-21 21:12:51,940 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:12:51,940 - INFO - [cached since 0.01376s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:12:51,941 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:12:51,941 - INFO - COMMIT
2024-10-21 21:12:52,709 - INFO - select pg_catalog.version()
2024-10-21 21:12:52,709 - INFO - [raw sql] ()
2024-10-21 21:12:52,712 - INFO - select current_schema()
2024-10-21 21:12:52,712 - INFO - [raw sql] ()
2024-10-21 21:12:52,714 - INFO - show standard_conforming_strings
2024-10-21 21:12:52,714 - INFO - [raw sql] ()
2024-10-21 21:12:52,716 - INFO - BEGIN (implicit)
2024-10-21 21:12:52,729 - INFO - SELECT reservations.id, reservations.reservation_id, reservations.product_id, reservations.quantity, reservations.timestamp, reservations.status 
FROM reservations 
WHERE reservations.reservation_id = $1::VARCHAR
2024-10-21 21:12:52,729 - INFO - [generated in 0.00026s] ('11ggt501',)
2024-10-21 21:12:52,732 - INFO - COMMIT
2024-10-21 21:13:29,895 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 21:13:39,948 - INFO - select pg_catalog.version()
2024-10-21 21:13:39,948 - INFO - [raw sql] ()
2024-10-21 21:13:39,953 - INFO - select current_schema()
2024-10-21 21:13:39,953 - INFO - [raw sql] ()
2024-10-21 21:13:39,955 - INFO - show standard_conforming_strings
2024-10-21 21:13:39,955 - INFO - [raw sql] ()
2024-10-21 21:13:39,957 - INFO - BEGIN (implicit)
2024-10-21 21:13:39,957 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:13:39,957 - INFO - [generated in 0.00017s] ()
2024-10-21 21:13:39,958 - INFO - COMMIT
2024-10-21 21:13:40,021 - INFO - select pg_catalog.version()
2024-10-21 21:13:40,021 - INFO - [raw sql] ()
2024-10-21 21:13:40,023 - INFO - select current_schema()
2024-10-21 21:13:40,023 - INFO - [raw sql] ()
2024-10-21 21:13:40,024 - INFO - show standard_conforming_strings
2024-10-21 21:13:40,024 - INFO - [raw sql] ()
2024-10-21 21:13:40,026 - INFO - BEGIN (implicit)
2024-10-21 21:13:40,027 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:13:40,027 - INFO - [generated in 0.00018s] ()
2024-10-21 21:13:40,029 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:13:40,029 - INFO - [generated in 0.00014s] ()
2024-10-21 21:13:40,030 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:13:40,030 - INFO - COMMIT
2024-10-21 21:13:40,100 - INFO - select pg_catalog.version()
2024-10-21 21:13:40,100 - INFO - [raw sql] ()
2024-10-21 21:13:40,102 - INFO - select current_schema()
2024-10-21 21:13:40,102 - INFO - [raw sql] ()
2024-10-21 21:13:40,103 - INFO - show standard_conforming_strings
2024-10-21 21:13:40,103 - INFO - [raw sql] ()
2024-10-21 21:13:40,104 - INFO - BEGIN (implicit)
2024-10-21 21:13:40,104 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:13:40,104 - INFO - [generated in 0.00017s] ('P001', 'Продукт 1', 100)
2024-10-21 21:13:40,106 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:13:40,106 - INFO - COMMIT
2024-10-21 21:13:40,118 - INFO - BEGIN (implicit)
2024-10-21 21:13:40,119 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:13:40,119 - INFO - [cached since 0.01484s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:13:40,120 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:13:40,120 - INFO - COMMIT
2024-10-21 21:13:41,096 - INFO - select pg_catalog.version()
2024-10-21 21:13:41,096 - INFO - [raw sql] ()
2024-10-21 21:13:41,099 - INFO - select current_schema()
2024-10-21 21:13:41,099 - INFO - [raw sql] ()
2024-10-21 21:13:41,101 - INFO - show standard_conforming_strings
2024-10-21 21:13:41,101 - INFO - [raw sql] ()
2024-10-21 21:13:41,102 - INFO - BEGIN (implicit)
2024-10-21 21:13:41,115 - INFO - SELECT reservations.id, reservations.reservation_id, reservations.product_id, reservations.quantity, reservations.timestamp, reservations.status 
FROM reservations 
WHERE reservations.reservation_id = $1::VARCHAR
2024-10-21 21:13:41,116 - INFO - [generated in 0.00024s] ('11ggt501',)
2024-10-21 21:13:41,119 - INFO - COMMIT
2024-10-21 21:14:49,103 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-6' coro=<Server.serve() done, defined at D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py:67> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\main.py", line 577, in run
    server.run()
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 396, in __wakeup
    self.__step()
  File "D:\Programs\PyCharm 2024.1.4\plugins\python\helpers-pro\pydevd_asyncio\pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 303, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 314, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 68, in serve
    with self.capture_signals():
  File "C:\Users\lizab\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "D:\work\image_service\venv\Lib\site-packages\uvicorn\server.py", line 328, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2024-10-21 21:14:59,049 - INFO - select pg_catalog.version()
2024-10-21 21:14:59,049 - INFO - [raw sql] ()
2024-10-21 21:14:59,053 - INFO - select current_schema()
2024-10-21 21:14:59,053 - INFO - [raw sql] ()
2024-10-21 21:14:59,054 - INFO - show standard_conforming_strings
2024-10-21 21:14:59,054 - INFO - [raw sql] ()
2024-10-21 21:14:59,056 - INFO - BEGIN (implicit)
2024-10-21 21:14:59,057 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-21 21:14:59,057 - INFO - [generated in 0.00015s] ()
2024-10-21 21:14:59,058 - INFO - COMMIT
2024-10-21 21:14:59,121 - INFO - select pg_catalog.version()
2024-10-21 21:14:59,121 - INFO - [raw sql] ()
2024-10-21 21:14:59,123 - INFO - select current_schema()
2024-10-21 21:14:59,123 - INFO - [raw sql] ()
2024-10-21 21:14:59,124 - INFO - show standard_conforming_strings
2024-10-21 21:14:59,124 - INFO - [raw sql] ()
2024-10-21 21:14:59,125 - INFO - BEGIN (implicit)
2024-10-21 21:14:59,125 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-21 21:14:59,125 - INFO - [generated in 0.00015s] ()
2024-10-21 21:14:59,128 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-21 21:14:59,128 - INFO - [generated in 0.00016s] ()
2024-10-21 21:14:59,129 - INFO - Таблицы 'products','reservations' успешно созданы или уже существуют.
2024-10-21 21:14:59,129 - INFO - COMMIT
2024-10-21 21:14:59,196 - INFO - select pg_catalog.version()
2024-10-21 21:14:59,196 - INFO - [raw sql] ()
2024-10-21 21:14:59,198 - INFO - select current_schema()
2024-10-21 21:14:59,198 - INFO - [raw sql] ()
2024-10-21 21:14:59,199 - INFO - show standard_conforming_strings
2024-10-21 21:14:59,200 - INFO - [raw sql] ()
2024-10-21 21:14:59,200 - INFO - BEGIN (implicit)
2024-10-21 21:14:59,201 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:14:59,201 - INFO - [generated in 0.00018s] ('P001', 'Продукт 1', 100)
2024-10-21 21:14:59,203 - INFO - Продукт 'Продукт 1' c id 'P001' успешно добавлен.
2024-10-21 21:14:59,203 - INFO - COMMIT
2024-10-21 21:14:59,215 - INFO - BEGIN (implicit)
2024-10-21 21:14:59,215 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-21 21:14:59,215 - INFO - [cached since 0.01512s ago] ('P002', 'Продукт 2', 150)
2024-10-21 21:14:59,216 - INFO - Продукт 'Продукт 2' c id 'P002' успешно добавлен.
2024-10-21 21:14:59,216 - INFO - COMMIT
2024-10-21 21:15:00,136 - INFO - select pg_catalog.version()
2024-10-21 21:15:00,137 - INFO - [raw sql] ()
2024-10-21 21:15:00,140 - INFO - select current_schema()
2024-10-21 21:15:00,140 - INFO - [raw sql] ()
2024-10-21 21:15:00,142 - INFO - show standard_conforming_strings
2024-10-21 21:15:00,142 - INFO - [raw sql] ()
2024-10-21 21:15:00,144 - INFO - BEGIN (implicit)
2024-10-21 21:15:00,157 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-21 21:15:00,157 - INFO - [generated in 0.00026s] ('P001',)
2024-10-21 21:15:00,162 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-21 21:15:00,162 - INFO - [generated in 0.00021s] (99, 'P001')
2024-10-21 21:15:00,164 - INFO - Резервация '11gghhht501' успешно добавлена.
2024-10-21 21:15:00,166 - INFO - INSERT INTO reservations (reservation_id, product_id, quantity, timestamp, status) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITH TIME ZONE, $5::VARCHAR) RETURNING reservations.id
2024-10-21 21:15:00,166 - INFO - [generated in 0.00040s] ('11gghhht501', 'P001', 1, datetime.datetime(2024, 10, 21, 21, 15, 0, 164040), 'success')
2024-10-21 21:15:00,167 - INFO - COMMIT
2024-10-22 09:15:17,228 - INFO - select pg_catalog.version()
2024-10-22 09:15:17,229 - INFO - [raw sql] ()
2024-10-22 09:15:17,233 - INFO - select current_schema()
2024-10-22 09:15:17,233 - INFO - [raw sql] ()
2024-10-22 09:15:17,234 - INFO - show standard_conforming_strings
2024-10-22 09:15:17,234 - INFO - [raw sql] ()
2024-10-22 09:15:17,236 - INFO - BEGIN (implicit)
2024-10-22 09:15:17,237 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-22 09:15:17,237 - INFO - [generated in 0.00022s] ()
2024-10-22 09:15:17,238 - INFO - COMMIT
2024-10-22 09:15:21,241 - INFO - select pg_catalog.version()
2024-10-22 09:15:21,241 - INFO - [raw sql] ()
2024-10-22 09:15:21,244 - INFO - select current_schema()
2024-10-22 09:15:21,244 - INFO - [raw sql] ()
2024-10-22 09:15:21,245 - INFO - show standard_conforming_strings
2024-10-22 09:15:21,245 - INFO - [raw sql] ()
2024-10-22 09:15:21,247 - INFO - BEGIN (implicit)
2024-10-22 09:15:21,247 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-22 09:15:21,247 - INFO - [generated in 0.00023s] ()
2024-10-22 09:15:21,249 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-22 09:15:21,249 - INFO - [generated in 0.00019s] ()
2024-10-22 09:15:21,250 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-22 09:15:21,250 - INFO - COMMIT
2024-10-22 09:15:21,290 - INFO - select pg_catalog.version()
2024-10-22 09:15:21,290 - INFO - [raw sql] ()
2024-10-22 09:15:21,291 - INFO - select current_schema()
2024-10-22 09:15:21,291 - INFO - [raw sql] ()
2024-10-22 09:15:21,292 - INFO - show standard_conforming_strings
2024-10-22 09:15:21,293 - INFO - [raw sql] ()
2024-10-22 09:15:21,294 - INFO - BEGIN (implicit)
2024-10-22 09:15:21,295 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:15:21,295 - INFO - [generated in 0.00039s] ('P001', 'РџСЂРѕРґСѓРєС‚ 1', 100)
2024-10-22 09:15:21,305 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:15:21,305 - INFO - COMMIT
2024-10-22 09:15:21,310 - INFO - BEGIN (implicit)
2024-10-22 09:15:21,311 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:15:21,311 - INFO - [cached since 0.01569s ago] ('P002', 'РџСЂРѕРґСѓРєС‚ 2', 150)
2024-10-22 09:15:21,312 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:15:21,312 - INFO - COMMIT
2024-10-22 09:17:14,863 - INFO - select pg_catalog.version()
2024-10-22 09:17:14,864 - INFO - [raw sql] ()
2024-10-22 09:17:14,867 - INFO - select current_schema()
2024-10-22 09:17:14,867 - INFO - [raw sql] ()
2024-10-22 09:17:14,869 - INFO - show standard_conforming_strings
2024-10-22 09:17:14,869 - INFO - [raw sql] ()
2024-10-22 09:17:14,870 - INFO - BEGIN (implicit)
2024-10-22 09:17:14,871 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-22 09:17:14,871 - INFO - [generated in 0.00023s] ()
2024-10-22 09:17:14,873 - INFO - COMMIT
2024-10-22 09:17:14,912 - INFO - select pg_catalog.version()
2024-10-22 09:17:14,912 - INFO - [raw sql] ()
2024-10-22 09:17:14,913 - INFO - select current_schema()
2024-10-22 09:17:14,914 - INFO - [raw sql] ()
2024-10-22 09:17:14,915 - INFO - show standard_conforming_strings
2024-10-22 09:17:14,915 - INFO - [raw sql] ()
2024-10-22 09:17:14,916 - INFO - BEGIN (implicit)
2024-10-22 09:17:14,916 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-22 09:17:14,916 - INFO - [generated in 0.00019s] ()
2024-10-22 09:17:14,917 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-22 09:17:14,918 - INFO - [generated in 0.00020s] ()
2024-10-22 09:17:14,918 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-22 09:17:14,919 - INFO - COMMIT
2024-10-22 09:17:14,959 - INFO - select pg_catalog.version()
2024-10-22 09:17:14,959 - INFO - [raw sql] ()
2024-10-22 09:17:14,961 - INFO - select current_schema()
2024-10-22 09:17:14,961 - INFO - [raw sql] ()
2024-10-22 09:17:14,962 - INFO - show standard_conforming_strings
2024-10-22 09:17:14,962 - INFO - [raw sql] ()
2024-10-22 09:17:14,963 - INFO - BEGIN (implicit)
2024-10-22 09:17:14,964 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:17:14,964 - INFO - [generated in 0.00023s] ('P001', 'РџСЂРѕРґСѓРєС‚ 1', 100)
2024-10-22 09:17:14,966 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:17:14,966 - INFO - COMMIT
2024-10-22 09:17:14,970 - INFO - BEGIN (implicit)
2024-10-22 09:17:14,971 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:17:14,971 - INFO - [cached since 0.007082s ago] ('P002', 'РџСЂРѕРґСѓРєС‚ 2', 150)
2024-10-22 09:17:14,972 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:17:14,972 - INFO - COMMIT
2024-10-22 09:17:32,808 - INFO - select pg_catalog.version()
2024-10-22 09:17:32,808 - INFO - [raw sql] ()
2024-10-22 09:17:32,812 - INFO - select current_schema()
2024-10-22 09:17:32,812 - INFO - [raw sql] ()
2024-10-22 09:17:32,813 - INFO - show standard_conforming_strings
2024-10-22 09:17:32,813 - INFO - [raw sql] ()
2024-10-22 09:17:32,815 - INFO - BEGIN (implicit)
2024-10-22 09:17:32,815 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-22 09:17:32,815 - INFO - [generated in 0.00023s] ()
2024-10-22 09:17:32,817 - INFO - COMMIT
2024-10-22 09:17:32,855 - INFO - select pg_catalog.version()
2024-10-22 09:17:32,855 - INFO - [raw sql] ()
2024-10-22 09:17:32,856 - INFO - select current_schema()
2024-10-22 09:17:32,856 - INFO - [raw sql] ()
2024-10-22 09:17:32,858 - INFO - show standard_conforming_strings
2024-10-22 09:17:32,858 - INFO - [raw sql] ()
2024-10-22 09:17:32,859 - INFO - BEGIN (implicit)
2024-10-22 09:17:32,859 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-22 09:17:32,859 - INFO - [generated in 0.00020s] ()
2024-10-22 09:17:32,860 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-22 09:17:32,860 - INFO - [generated in 0.00018s] ()
2024-10-22 09:17:32,861 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-22 09:17:32,861 - INFO - COMMIT
2024-10-22 09:17:32,899 - INFO - select pg_catalog.version()
2024-10-22 09:17:32,899 - INFO - [raw sql] ()
2024-10-22 09:17:32,901 - INFO - select current_schema()
2024-10-22 09:17:32,901 - INFO - [raw sql] ()
2024-10-22 09:17:32,902 - INFO - show standard_conforming_strings
2024-10-22 09:17:32,902 - INFO - [raw sql] ()
2024-10-22 09:17:32,903 - INFO - BEGIN (implicit)
2024-10-22 09:17:32,904 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:17:32,904 - INFO - [generated in 0.00026s] ('P001', 'РџСЂРѕРґСѓРєС‚ 1', 100)
2024-10-22 09:17:32,906 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:17:32,906 - INFO - COMMIT
2024-10-22 09:17:32,912 - INFO - BEGIN (implicit)
2024-10-22 09:17:32,912 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:17:32,912 - INFO - [cached since 0.008834s ago] ('P002', 'РџСЂРѕРґСѓРєС‚ 2', 150)
2024-10-22 09:17:32,913 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:17:32,913 - INFO - COMMIT
2024-10-22 09:18:33,478 - INFO - select pg_catalog.version()
2024-10-22 09:18:33,479 - INFO - [raw sql] ()
2024-10-22 09:18:33,481 - INFO - select current_schema()
2024-10-22 09:18:33,481 - INFO - [raw sql] ()
2024-10-22 09:18:33,482 - INFO - show standard_conforming_strings
2024-10-22 09:18:33,482 - INFO - [raw sql] ()
2024-10-22 09:18:33,483 - INFO - BEGIN (implicit)
2024-10-22 09:18:33,488 - INFO - SELECT products.id, products.product_id, products.name, products.quantity, products.created_at, products.updated_at 
FROM products 
WHERE products.product_id = $1::VARCHAR
2024-10-22 09:18:33,488 - INFO - [generated in 0.00031s] ('P001',)
2024-10-22 09:18:33,500 - INFO - UPDATE products SET quantity=$1::INTEGER, updated_at=now() WHERE products.product_id = $2::VARCHAR
2024-10-22 09:18:33,500 - INFO - [generated in 0.00026s] (99, 'P001')
2024-10-22 09:18:33,502 - INFO - Р РµР·РµСЂРІР°С†РёСЏ '4325325' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅР°.
2024-10-22 09:18:33,505 - INFO - INSERT INTO reservations (reservation_id, product_id, quantity, timestamp, status) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::TIMESTAMP WITH TIME ZONE, $5::VARCHAR) RETURNING reservations.id
2024-10-22 09:18:33,505 - INFO - [generated in 0.00029s] ('4325325', 'P001', 1, datetime.datetime(2024, 10, 22, 9, 18, 33, 502548), 'success')
2024-10-22 09:18:33,512 - INFO - COMMIT
2024-10-22 09:22:12,111 - INFO - select pg_catalog.version()
2024-10-22 09:22:12,112 - INFO - [raw sql] ()
2024-10-22 09:22:12,115 - INFO - select current_schema()
2024-10-22 09:22:12,116 - INFO - [raw sql] ()
2024-10-22 09:22:12,117 - INFO - show standard_conforming_strings
2024-10-22 09:22:12,117 - INFO - [raw sql] ()
2024-10-22 09:22:12,119 - INFO - BEGIN (implicit)
2024-10-22 09:22:12,119 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-22 09:22:12,119 - INFO - [generated in 0.00022s] ()
2024-10-22 09:22:12,121 - INFO - COMMIT
2024-10-22 09:22:12,159 - INFO - select pg_catalog.version()
2024-10-22 09:22:12,159 - INFO - [raw sql] ()
2024-10-22 09:22:12,161 - INFO - select current_schema()
2024-10-22 09:22:12,161 - INFO - [raw sql] ()
2024-10-22 09:22:12,162 - INFO - show standard_conforming_strings
2024-10-22 09:22:12,162 - INFO - [raw sql] ()
2024-10-22 09:22:12,163 - INFO - BEGIN (implicit)
2024-10-22 09:22:12,164 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-22 09:22:12,164 - INFO - [generated in 0.00022s] ()
2024-10-22 09:22:12,190 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-22 09:22:12,190 - INFO - [generated in 0.00032s] ()
2024-10-22 09:22:12,208 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-22 09:22:12,208 - INFO - COMMIT
2024-10-22 09:22:12,251 - INFO - select pg_catalog.version()
2024-10-22 09:22:12,251 - INFO - [raw sql] ()
2024-10-22 09:22:12,253 - INFO - select current_schema()
2024-10-22 09:22:12,253 - INFO - [raw sql] ()
2024-10-22 09:22:12,254 - INFO - show standard_conforming_strings
2024-10-22 09:22:12,254 - INFO - [raw sql] ()
2024-10-22 09:22:12,255 - INFO - BEGIN (implicit)
2024-10-22 09:22:12,255 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:22:12,255 - INFO - [generated in 0.00022s] ('P001', 'РџСЂРѕРґСѓРєС‚ 1', 100)
2024-10-22 09:22:12,258 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:22:12,258 - INFO - COMMIT
2024-10-22 09:22:12,262 - INFO - BEGIN (implicit)
2024-10-22 09:22:12,262 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:22:12,262 - INFO - [cached since 0.006841s ago] ('P002', 'РџСЂРѕРґСѓРєС‚ 2', 150)
2024-10-22 09:22:12,263 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:22:12,263 - INFO - COMMIT
2024-10-22 09:36:38,654 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<main() done, defined at /home/belyankinaer/work/reservation_service/app/main.py:14> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "/home/belyankinaer/pycharm-2024.1.4/plugins/python/helpers/pydev/pydevd.py", line 2252, in <module>
    main()
  File "/home/belyankinaer/work/reservation_service/app/main.py", line 21, in <module>
    asyncio.run(main())  # Run the main async function
    ^^^^^^^^^^^^^^^^^^^
  File "/home/belyankinaer/pycharm-2024.1.4/plugins/python/helpers-pro/pydevd_asyncio/pydevd_nest_asyncio.py", line 138, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/belyankinaer/pycharm-2024.1.4/plugins/python/helpers-pro/pydevd_asyncio/pydevd_nest_asyncio.py", line 234, in run_until_complete
    self._run_once()
  File "/home/belyankinaer/pycharm-2024.1.4/plugins/python/helpers-pro/pydevd_asyncio/pydevd_nest_asyncio.py", line 286, in _run_once
    handle._run()
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/home/belyankinaer/pycharm-2024.1.4/plugins/python/helpers-pro/pydevd_asyncio/pydevd_nest_asyncio.py", line 395, in step
    step_orig(task, exc)
  File "/usr/lib/python3.11/asyncio/tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "/home/belyankinaer/work/reservation_service/app/main.py", line 15, in main
    asyncio.run(db_manager.create_database())
    ^^^^^^^
  File "/home/belyankinaer/work/reservation_service/app/main.py", line 15, in main
    asyncio.run(db_manager.create_database())
    ^^^^^^^
  File "_pydevd_bundle\\pydevd_cython.pyx", line 1187, in _pydevd_bundle.pydevd_cython.SafeCallWrapper.__call__
  File "_pydevd_bundle\\pydevd_cython.pyx", line 627, in _pydevd_bundle.pydevd_cython.PyDBFrame.trace_dispatch
  File "_pydevd_bundle\\pydevd_cython.pyx", line 937, in _pydevd_bundle.pydevd_cython.PyDBFrame.trace_dispatch
  File "_pydevd_bundle\\pydevd_cython.pyx", line 928, in _pydevd_bundle.pydevd_cython.PyDBFrame.trace_dispatch
  File "_pydevd_bundle\\pydevd_cython.pyx", line 585, in _pydevd_bundle.pydevd_cython.PyDBFrame.do_wait_suspend
  File "/home/belyankinaer/pycharm-2024.1.4/plugins/python/helpers/pydev/pydevd.py", line 1201, in do_wait_suspend
    self._do_wait_suspend(thread, frame, event, arg, suspend_type, from_this_thread)
  File "/home/belyankinaer/pycharm-2024.1.4/plugins/python/helpers/pydev/pydevd.py", line 1216, in _do_wait_suspend
    time.sleep(0.01)
KeyboardInterrupt
2024-10-22 09:37:39,802 - INFO - select pg_catalog.version()
2024-10-22 09:37:39,802 - INFO - [raw sql] ()
2024-10-22 09:37:39,807 - INFO - select current_schema()
2024-10-22 09:37:39,807 - INFO - [raw sql] ()
2024-10-22 09:37:39,808 - INFO - show standard_conforming_strings
2024-10-22 09:37:39,808 - INFO - [raw sql] ()
2024-10-22 09:37:39,810 - INFO - BEGIN (implicit)
2024-10-22 09:37:39,811 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-22 09:37:39,811 - INFO - [generated in 0.00028s] ()
2024-10-22 09:37:44,331 - INFO - COMMIT
2024-10-22 09:37:46,015 - INFO - select pg_catalog.version()
2024-10-22 09:37:46,015 - INFO - [raw sql] ()
2024-10-22 09:37:46,017 - INFO - select current_schema()
2024-10-22 09:37:46,017 - INFO - [raw sql] ()
2024-10-22 09:37:46,019 - INFO - show standard_conforming_strings
2024-10-22 09:37:46,020 - INFO - [raw sql] ()
2024-10-22 09:37:46,021 - INFO - BEGIN (implicit)
2024-10-22 09:37:46,021 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-22 09:37:46,021 - INFO - [generated in 0.00022s] ()
2024-10-22 09:37:46,051 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-22 09:37:46,051 - INFO - [generated in 0.00031s] ()
2024-10-22 09:37:46,069 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-22 09:37:46,070 - INFO - COMMIT
2024-10-22 09:37:46,113 - INFO - select pg_catalog.version()
2024-10-22 09:37:46,113 - INFO - [raw sql] ()
2024-10-22 09:37:46,114 - INFO - select current_schema()
2024-10-22 09:37:46,115 - INFO - [raw sql] ()
2024-10-22 09:37:46,116 - INFO - show standard_conforming_strings
2024-10-22 09:37:46,116 - INFO - [raw sql] ()
2024-10-22 09:37:46,117 - INFO - BEGIN (implicit)
2024-10-22 09:37:46,117 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:37:46,117 - INFO - [generated in 0.00021s] ('P001', 'РџСЂРѕРґСѓРєС‚ 1', 100)
2024-10-22 09:37:46,120 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:37:46,120 - INFO - COMMIT
2024-10-22 09:37:46,124 - INFO - BEGIN (implicit)
2024-10-22 09:37:46,124 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:37:46,124 - INFO - [cached since 0.007345s ago] ('P002', 'РџСЂРѕРґСѓРєС‚ 2', 150)
2024-10-22 09:37:46,125 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:37:46,125 - INFO - COMMIT
2024-10-22 09:40:11,247 - INFO - select pg_catalog.version()
2024-10-22 09:40:11,248 - INFO - [raw sql] ()
2024-10-22 09:40:11,252 - INFO - select current_schema()
2024-10-22 09:40:11,252 - INFO - [raw sql] ()
2024-10-22 09:40:11,254 - INFO - show standard_conforming_strings
2024-10-22 09:40:11,254 - INFO - [raw sql] ()
2024-10-22 09:40:11,256 - INFO - BEGIN (implicit)
2024-10-22 09:40:11,257 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-22 09:40:11,257 - INFO - [generated in 0.00028s] ()
2024-10-22 09:40:11,259 - INFO - CREATE DATABASE reservation_service;
2024-10-22 09:40:11,259 - INFO - [generated in 0.00025s] ()
2024-10-22 09:40:11,260 - INFO - ROLLBACK
2024-10-22 09:41:08,536 - INFO - select pg_catalog.version()
2024-10-22 09:41:08,536 - INFO - [raw sql] ()
2024-10-22 09:41:08,540 - INFO - select current_schema()
2024-10-22 09:41:08,540 - INFO - [raw sql] ()
2024-10-22 09:41:08,542 - INFO - show standard_conforming_strings
2024-10-22 09:41:08,542 - INFO - [raw sql] ()
2024-10-22 09:41:08,544 - INFO - BEGIN (implicit; DBAPI should not BEGIN due to autocommit mode)
2024-10-22 09:41:08,544 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-22 09:41:08,544 - INFO - [generated in 0.00044s] ()
2024-10-22 09:41:08,545 - INFO - CREATE DATABASE reservation_service;
2024-10-22 09:41:08,545 - INFO - [generated in 0.00019s] ()
2024-10-22 09:41:12,684 - INFO - ROLLBACK using DBAPI connection.rollback(), DBAPI should ignore due to autocommit mode
2024-10-22 09:41:12,733 - INFO - select pg_catalog.version()
2024-10-22 09:41:12,733 - INFO - [raw sql] ()
2024-10-22 09:41:12,734 - INFO - select current_schema()
2024-10-22 09:41:12,734 - INFO - [raw sql] ()
2024-10-22 09:41:12,736 - INFO - show standard_conforming_strings
2024-10-22 09:41:12,736 - INFO - [raw sql] ()
2024-10-22 09:41:12,737 - INFO - BEGIN (implicit)
2024-10-22 09:41:12,737 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-22 09:41:12,737 - INFO - [generated in 0.00020s] ()
2024-10-22 09:41:12,758 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-22 09:41:12,758 - INFO - [generated in 0.00029s] ()
2024-10-22 09:41:12,776 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-22 09:41:12,777 - INFO - COMMIT
2024-10-22 09:41:12,821 - INFO - select pg_catalog.version()
2024-10-22 09:41:12,821 - INFO - [raw sql] ()
2024-10-22 09:41:12,822 - INFO - select current_schema()
2024-10-22 09:41:12,823 - INFO - [raw sql] ()
2024-10-22 09:41:12,824 - INFO - show standard_conforming_strings
2024-10-22 09:41:12,824 - INFO - [raw sql] ()
2024-10-22 09:41:12,825 - INFO - BEGIN (implicit)
2024-10-22 09:41:12,825 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:41:12,825 - INFO - [generated in 0.00023s] ('P001', 'РџСЂРѕРґСѓРєС‚ 1', 100)
2024-10-22 09:41:12,827 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:41:12,828 - INFO - COMMIT
2024-10-22 09:41:12,832 - INFO - BEGIN (implicit)
2024-10-22 09:41:12,832 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:41:12,832 - INFO - [cached since 0.006833s ago] ('P002', 'РџСЂРѕРґСѓРєС‚ 2', 150)
2024-10-22 09:41:12,833 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:41:12,833 - INFO - COMMIT
2024-10-22 09:41:39,637 - INFO - select pg_catalog.version()
2024-10-22 09:41:39,637 - INFO - [raw sql] ()
2024-10-22 09:41:39,641 - INFO - select current_schema()
2024-10-22 09:41:39,641 - INFO - [raw sql] ()
2024-10-22 09:41:39,642 - INFO - show standard_conforming_strings
2024-10-22 09:41:39,642 - INFO - [raw sql] ()
2024-10-22 09:41:39,644 - INFO - BEGIN (implicit; DBAPI should not BEGIN due to autocommit mode)
2024-10-22 09:41:39,645 - INFO - SELECT 1 FROM pg_database WHERE datname='reservation_service'
2024-10-22 09:41:39,645 - INFO - [generated in 0.00037s] ()
2024-10-22 09:41:39,646 - INFO - ROLLBACK using DBAPI connection.rollback(), DBAPI should ignore due to autocommit mode
2024-10-22 09:41:39,684 - INFO - select pg_catalog.version()
2024-10-22 09:41:39,684 - INFO - [raw sql] ()
2024-10-22 09:41:39,685 - INFO - select current_schema()
2024-10-22 09:41:39,686 - INFO - [raw sql] ()
2024-10-22 09:41:39,687 - INFO - show standard_conforming_strings
2024-10-22 09:41:39,687 - INFO - [raw sql] ()
2024-10-22 09:41:39,688 - INFO - BEGIN (implicit)
2024-10-22 09:41:39,688 - INFO - 
                CREATE TABLE IF NOT EXISTS products (
                    id SERIAL PRIMARY KEY,
                    product_id VARCHAR(50) NOT NULL UNIQUE,
                    name VARCHAR(100),
                    quantity INTEGER NOT NULL,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                );
                
2024-10-22 09:41:39,688 - INFO - [generated in 0.00018s] ()
2024-10-22 09:41:39,689 - INFO - 
                CREATE TABLE IF NOT EXISTS reservations (
                    id SERIAL PRIMARY KEY,
                    reservation_id VARCHAR(50) NOT NULL UNIQUE,
                    product_id VARCHAR(50) NOT NULL REFERENCES products(product_id),
                    quantity INTEGER NOT NULL,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    status VARCHAR(20) DEFAULT 'pending'
                );
                
2024-10-22 09:41:39,689 - INFO - [generated in 0.00019s] ()
2024-10-22 09:41:39,690 - INFO - РўР°Р±Р»РёС†С‹ 'products','reservations' СѓСЃРїРµС€РЅРѕ СЃРѕР·РґР°РЅС‹ РёР»Рё СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‚.
2024-10-22 09:41:39,690 - INFO - COMMIT
2024-10-22 09:41:39,728 - INFO - select pg_catalog.version()
2024-10-22 09:41:39,728 - INFO - [raw sql] ()
2024-10-22 09:41:39,729 - INFO - select current_schema()
2024-10-22 09:41:39,729 - INFO - [raw sql] ()
2024-10-22 09:41:39,730 - INFO - show standard_conforming_strings
2024-10-22 09:41:39,731 - INFO - [raw sql] ()
2024-10-22 09:41:39,732 - INFO - BEGIN (implicit)
2024-10-22 09:41:39,732 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:41:39,732 - INFO - [generated in 0.00022s] ('P001', 'РџСЂРѕРґСѓРєС‚ 1', 100)
2024-10-22 09:41:39,734 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 1' c id 'P001' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:41:39,734 - INFO - COMMIT
2024-10-22 09:41:39,740 - INFO - BEGIN (implicit)
2024-10-22 09:41:39,741 - INFO - 
            INSERT INTO products (product_id, name, quantity)
            VALUES ($1, $2, $3)
            ON CONFLICT (product_id) DO UPDATE 
            SET name = EXCLUDED.name,
                quantity = EXCLUDED.quantity;
        
2024-10-22 09:41:39,741 - INFO - [cached since 0.008716s ago] ('P002', 'РџСЂРѕРґСѓРєС‚ 2', 150)
2024-10-22 09:41:39,741 - INFO - РџСЂРѕРґСѓРєС‚ 'РџСЂРѕРґСѓРєС‚ 2' c id 'P002' СѓСЃРїРµС€РЅРѕ РґРѕР±Р°РІР»РµРЅ.
2024-10-22 09:41:39,742 - INFO - COMMIT
